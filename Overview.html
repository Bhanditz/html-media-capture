<!DOCTYPE html>
<html>
  <head>
    <title>HTML Media Capture</title>
    <meta http-equiv='Content-Type' content='text/html;charset=utf-8'/>
    <script src='../ReSpec.js/js/respec.js' class='remove'></script>
    <script class='remove'>
      var respecConfig = {
          specStatus:           "ED",
          shortName:            "html-media-capture",
          editors: [
              {name: "Anssi Kostiainen", company: "Nokia (from May 11, 2012)"},
              {name: "Ilkka Oksanen", company: "Nokia (until May 10, 2012)"},
              {name: "Dominique Hazaël-Massieux", company: "W3C (until May 10, 2012)"}
          ],
          //publishDate:          "yyyy-mm-dd",
          previousPublishDate:  "2011-04-14",
          previousMaturity:     "WD",
          edDraftURI:           "http://dev.w3.org/2009/dap/camera/",
          // lcEnd: "2009-08-05",
      };
    </script>
    <script src='../common/config.js' class='remove'></script>
  </head>
  <body>
    
    <section id='abstract'>
      This specification defines HTML form enhancements that provide access to
      the audio, image and video capture capabilities of the device.
    </section>
    
    <section id="sotd">
      <p>
        This document is a the first part of the split of the
        <a href="http://www.w3.org/TR/2010/WD-capture-api-20100401/">previous
        version</a> of this document, focused on the integration of media
        capture in HTML forms based on an extension to the
        <a href="http://www.w3.org/TR/FileAPI/">FileAPI</a>. The second part of
        the split focused on programmatic access to the capture devices will be
        published separately.
      </p>
      <p>
        The Working Group is looking for feedback on the general approach of
        this new version, and will coordinate with the HTML and Web
        Applications Working Group to ensure the proper progress of this
        document.
      </p>
      <p>
        Issues and editors notes in the document highlight some of the points
        on which the group is still working and would particularly like to get
        feedback.
      </p>
    </section>
    
    <section>
      <h2>Introduction</h2>
      <p>
        The HTML Form Based Media Capturing specification defines a new
        interface for media files, a new parameter for the accept attribute of
        the HTML input element in file upload state, and recommendations for
        providing optimized access to the microphone and camera of a
        hosting device.
      </p>
      <p>
        Providing streaming access to these capabilities is outside of the
        scope of this specification.
      </p>
    </section>

    <section id="conformance">
      <p>
        This specification defines conformance criteria that apply to a single
        product: the <dfn>user agent</dfn> that implements the interfaces that
        it contains.
      </p>
      <p>
        Implementations that use ECMAScript to implement the APIs defined in
        this specification must implement them in a manner consistent with the
        ECMAScript Bindings defined in the Web IDL specification [[!WEBIDL]],
        as this specification uses that specification and terminology.
      </p>
    </section>

    <section id="security">
      <h2>Security and Privacy Considerations</h2>
      <p>
        This specification builds upon the security and privacy protections
        provided by the [[!HTML5]] <code>&lt;input type="file"&gt;</code> and
        the [[!FILE-API]] specifications; in particular, it is expected that
        any offer to start capturing content from the user’s device would
        require a specific user interaction on an HTML element that is entirely
        controlled by the user agent.
      </p>
      
      <p>
        In addition to the requirements already highlighted in the [[!HTML5]]
        and [[!FILE-API]] specifications, implementors should take care of
        additional leakage of privacy-sensitive data from captured media. For
        instance, embedding the user’s location in a captured media metadata
        (e.g. EXIF) might transmit more private data than the user might be
        expecting.
      </p>
    </section>
    
    <section id="formaccess">
      <h2>Capture aware file-select control</h2>
      <p>
        This section is normative.
      </p>
      <p>
        If an input element in the File Upload state [[!HTML5]] contains
        accept attribute with values <code>image/*</code>, <code>audio/*</code>,
        or <code>video/*</code>, the user agent can invoke a file picker that
        allows respectively the user to take a picture, record a sound file, or
        record a video in addition to selecting an existing file from the file
        system.
      </p>
      <p>
        See the <a href="#uiexamples">User Interface Examples</a> appendix for
        the illustration.
      </p>
      <p>
        In case the user chooses to capture video, audio, or image content, the
        user agent creates media files on the fly
        <a href="http://dev.w3.org/html5/spec/number-state.html#file-upload-state">
        as specified</a> in [[HTML5]].
      </p>
      <p>
        If the user selects files of whose MIME types match <code>image/*</code>,
        <code>audio/*</code>, or <code>video/*</code> (on the filesystem or via
        a successful media capture), the relevant files in the <code>files</code>
        attribute [[HTML5]] MUST implement the <code>MediaFile</code> interface.
      </p>
      <pre class="example sh_html">
        &lt;input type="file" accept="image/*" id="capture"&gt;
      </pre>
    </section>
    
    <section id="captureparam">
      <h2>The <code>capture</code> attribute</h2>
      <p>This section is normative.</p>
      <p>
        The <code>capture</code> attribute may be added to the <code>input</code>
        element to provide user agents with a hint of that by the default a
        file picker should be in media capturing mode.
      </p>
      <p>
        The <code>capture</code> attribute is an enumerated attribute that can
        take one of the following values: <code>camera</code>, <code>camcorder
        </code>, <code>microphone</code>, <code>filesystem</code> (ASCII
        case-insensitive). These values indicate which source the file picker
        interface should preferably present to the user by default. Both the
        invalid and missing default value are <code>filesystem</code>.
      </p>
      <div class="issue">
        What to do if there is no accept attribute? What if the accept attribute
        is set to a value that the pre-hinted device cannot support? See
        <a href="http://lists.w3.org/Archives/Public/public-device-apis/2011Apr/0013.html">
        related discussion</a>.
      </div>
      <dl title="[Supplemental] interface HTMLInputElement" class="idl">
        <dt>attribute DOMString capture</dt>
        <dd>
          One of <code>camera</code>, <code>camcorder</code>,
          <code>microphone</code>, <code>filesystem</code>
        </dd>
      </dl>
      <p>
        For example, the following code indicates that the user is expected to
        upload an image from the device camera:
      </p>
      <pre class="example sh_html">
        &lt;input type="file" accept="image/*" capture="camera" id="capture"&gt;
      </pre>
      <p>
        A possible rendering of a file picker taking this parameter into
        account is offered in the <a href="#uiexamples">User Interface Examples
        appendix</a>.
      </p>
    </section>
    
    <section class='appendix' id="uiexamples">
    <h2>User Interface Examples</h2>
    <p>
      A media capture file picker might render as:
    </p>
    <p>
      <img alt="A File picker with camera support"
      src="capture-api-file-picker-concept.png">
    </p>
  </section>
  
</body>
</html>
