<!DOCTYPE html>
<html>
  <head>
    <title>HTML Media Capture</title>
    <meta http-equiv='Content-Type' content='text/html;charset=utf-8'/>
    <script src='../ReSpec.js/js/respec.js' class='remove'></script>
    <script class='remove'>
      var respecConfig = {
          specStatus:           "ED",
          shortName:            "html-media-capture",
          editors: [{name: "Dzung D Tran", company: "Intel"},
                    {name: "Ilkka Oksanen", company: "Nokia"},
                    {name: "Ingmar Kliche", company: "Deutsche Telekom"},
                    {name: "Dominique Hazaël-Massieux", company: "W3C"}
      ],
          //publishDate:  "2010-04-01",
          // previousPublishDate:  "1977-03-15",
          edDraftURI:           "http://dev.w3.org/2009/dap/camera/",
          // lcEnd: "2009-08-05",
      };
    </script>
    <script src='../common/config.js' class='remove'></script>
  </head>
  <body>
  
    <section id='abstract'>
      This specification defines HTML form enhancements that provide access to the audio, image and video capture
      capabilities of the device.  
    </section>

    <section id="sotd">
      <p>This document represents the early consensus of the group on
      the scope and features of the proposed Capture
      functionality. Issues and editors notes in the document highlight some of
      the points on which the group is still working and would
      particularly like to get feedback.</p>
    </section>

    <section>
    <h2>Introduction</h2>

    <p>The HTML Form Based Media Capturing specification defines a new
    interface for media files, a new attribute for input element in
    file upload state, and recomendations for
    providing optimised access to the microphone and camera of a
    hosting device.</p> </section>

    <section id="conformance">
      <p>
        This specification defines conformance criteria that apply to a single product: the <dfn>user agent</dfn> that implements the
        interfaces that it contains.
      </p>
      <p>

        Implementations that use ECMAScript to implement the APIs defined in this specification must implement them in a manner consistent
        with the ECMAScript Bindings defined in the Web IDL specification [[!WEBIDL]], as this specification uses that specification and
        terminology.
      </p>

    </section>

    <section id="security">
    <h2>Security and Privacy Considerations</h2>
    <!-- @@@ get inspiration from FileAPI spec -->
    <!-- @@@ make note of leaking private date through EXIF -->
    <p>This specification builds upon the security and privacy protections provided by the [[!HTML5]] <code>input type="file"</code> and the [[!FILE-API]] specifications; in particular, it is expected that any offer to start capturing content from the user’s device would require a specific user interaction on an HTML element that is entirely controled by the user agent.</p>

    <p>In addition to the requirements already highlighted in the [[!HTML5]] and [[!FILE-API]] specifications, implementors should take care of additional leakage of privacy-sensitive data from captured media. For instance, embedding the user’s location in a captured media might transmit more private data than the user might be expecting.</p>

    </section>

    <section id="api">
    <h2>API Description</h2>

    <section id="mediafile"><h3><a>MediaFile</a> interface</h3>

    <p><code>MediaFile</code> captures a single photo, video or sound
    captured by the device. It inherits
    from <code>File</code> [[!FILE-API]]</p>

    <dl title="[NoInterfaceObject] interface MediaFile : File" class="idl">

    <dt>attribute FormatData format </dt>

    <dd>The format attribute represents the format information of <a
    href="#formatdata"><code>MediaFile</code></a>
    object.<!-- @@@ note on whether we need the indirection or not --></dd></dl>

    </section>

    <section  id="formatdata"><h3><a>FormatData</a> interface</h3>

    <p><code>FormatData</code> captures format information of a media
    file captured by the device.</p>

    <dl title="[NoInterfaceObject] interface FormatData" class="idl">

      <dt>attribute DOMString codecs</dt>
      <dd>The type attribute is not enough to determine the format of the
      content since it only specifies the container type. The codecs attribute
      represents the actual format that the audio and video of the content.
      The codecs attribute MUST conforms to the [[!RFC4281]].
      For example, a valid value for H.263 video and AAC low
      complexity would be codecs="s263, mp4a.40.2".</dd>

      <dt>attribute long bitrate </dt>
      <dd>The codecs attribute only specifies the profile and level of the encoded content
      which doesn't specify the actual bitrate. It only specifies the maximum encoded 
      bitrate, thus this bitrate attribute is the average bitrate of the content. In the case
      of a image this attribute has value 0.</dd>

      <dt>attribute unsigned long height </dt>
      <dd>The height attribute represents height of the image or video
      in pixels. In the case of a sound clip this attribute has value 0.</dd>

      <dt>attribute unsigned long width </dt>
      <dd>The width attribute represents width of the image or video
      in pixels. In the case of a sound clip this attribute has value 0.</dd>

      <dt>attribute double duration </dt>
      <dd>The duration attribute represents length of the video or sound
      clip in milliseconds. In the case of a image this attribute has value 0.</dd>
    </dl>
    
    </section>
  </section>

  <section id="medialist"><h3><a>MediaList</a> typedef</h3>
    <p>The <a>MediaList</a> typedef represents a <code>sequence</code> of
    <a href="#mediafile"> <code>MediaFile</code></a>
    objects. </p>

    <dl title="typedef sequence&lt;MediaFile&gt; MediaList" class="idl"></dl>
  </section>

  <section id="formaccess">
    <h2>Capture aware file-select control</h2>

    <p>This section is normative.</p>

    <p>If input element in the File Upload state [[HTML5]] contains
    accept attribute with values <code>image/*</code>,
    <code>sound/*</code>, or <code>video/*</code>, the user agent can
    invoke a file picker that allows respectively the user to take a
    picture, record a sound file, or record a video in addition to
    selecting an existing file from the file system.</p>

    <p>See the <a href="#uiexamples">User Interface Examples</a> appendix for the illustration.

    <p>In case the user chooses to capture video, audio, or image
    content, the user agent creates media files on the fly as
    specified in [[HTML5]].</p><!-- @@@ more explicit ref http://dev.w3.org/html5/spec/number-state.html#file-upload-state -->

    <p>If the user captures media files successfully, the
    <code>files</code> attribute [[HTML5]] MUST return a <a
    href="#medialist">MediaList</a> object that represents the
    current captured content instead of <code>FileList</code>
    [[!FILE-API]] object as specified in [[!HTML5]].

    <pre class="example sh_javascript_dom">&lt;input id="cameraInput" type="file" accept="image/*"&gt; </pre>

    <!-- @@@ note on streaming and &lt;device&gt; -->

</section>

  <section id="formaccess">
    <h2>The <code>Capture</code> parameter</h2>

    <p>This section is normative.</p>

    <p>The <code>capture</code> parameter may be specified on the media type values of the <code>accept</code> attribute to provide user agents with a hint of that by the default a file picker should be in media capturing mode.</p>

    <p>The <code>capture</code> parameter can take one of the following values: <code>camera</code>, <code>camcorder</code>, <code>microphone</code>. These values indicate which source the file picker interface should preferably present to the user by default.</p>

</section>

<section class='appendix' id="uiexamples">
<h2>User Interface Examples</h2>

<p>Capture API aware file picker might render as:

<p><img alt="A File picker with camera support" src="capture-api-file-picker-concept.png"></p> 
</section>

<section class='appendix' id="future">
<h2>Features for Future Consideration</h2>

<p>This is a list of features that have been discussed with respect to
this version of the API but for which it has been decided that if they
are included it will be in a future revision.

</p>
<ul>
<li>... </li></ul>
</section>
</body>
</html>
