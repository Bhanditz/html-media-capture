<!DOCTYPE html>
<html>
  <head>
    <title>Capture Input Selection</title>
    <meta http-equiv='Content-Type' content='text/html;charset=utf-8'/>
    <script src='../ReSpec.js/js/respec.js' class='remove'></script>
    <script class='remove'>
      var respecConfig = {
          specStatus:           "FPWD",
          shortName:            "capture-api",
          editors: [{name: "Dzung D Tran", company: "Intel"},
                    {name: "Ilkka Oksanen", company: "Nokia"},
                    {name: "Ingmar Kliche", company: "Deutsche Telekom"},
                    //{name: "Dominique HazaÃ«l-Massieux", company: "W3C"}
      ],
          publishDate:  "2010-04-01",
          // previousPublishDate:  "1977-03-15",
          edDraftURI:           "http://dev.w3.org/2009/dap/camera/",
          // lcEnd: "2009-08-05",
      };
    </script>
    <script src='../common/config.js' class='remove'></script>
  </head>
  <body>
  
    <section id='abstract'>
      This specification defines an Application Programming Interface
      (<acronym title="Application Programming Interface">API</acronym>)
      that provides access to the audio, image and video capture
      capabilities of the device.  
    </section>

    <section id="sotd">
      <p>This document represents the early consensus of the group on
      the scope and features of the proposed Capture
      API. Issues and editors notes in the document highlight some of
      the points on which the group is still working and would
      particularly like to get feedback.</p>
    </section>

    <section>
    <h2>Introduction</h2>

    <p>The Capture API defines a high-level interface for accessing the
    microphone and camera of a hosting device.</p>
    </section>

    <section id="security">
    <h2>Security and Privacy Considerations</h2>

    <p class='note'>
    <strong>The overall architecture for addressing privacy in DAP is still  
    under construction. As it is finalized, there may be changes made to  
    this API to reflect requirements or support for privacy-related  
    functionality.</strong>
    </p>   

    <p>The API defined in this specification launches the capture
    application which allows the user to take pictures, record voice or
    record video and provides a handle to the content. This information
    can potentially compromise user privacy and a conforming
    implementation of this specification MUST provide a mechanism that
    protects the user's privacy and this mechanism should ensure that such
    operations MUST be authenticated.</p>

    <h3>Privacy considerations for implementers of Capture API</h3>

    <p>A conforming implementation of this specification MUST provide a
    mechanism that protects the user's privacy and this mechanism SHOULD
    ensure that privacy information is not revealed without user's
    informed consent.</p>

    </section>

    <section id="api">
    <h2>API Description</h2>

    <section id="mediafile"><h3><a>MediaFile</a> interface</h3>

    <p><code>MediaFile</code> captures a single photo, video or sound
    captured by the device native capture application. It inherits
    from <code>File</code> [[FILE-API]]</p>

    <dl title="[NoInterfaceObject] interface MediaFile : File" class="idl">

    <dt>attribute FormatData format </dt>

    <dd>The format attribute represents the format information of <a
    href="#formatdata"><code>MediaFile</code></a>
    object.</dd></dl>

    </section>

    <section  id="formatdata"><h3><a>FormatData</a> interface</h3>

    <p><code>FormatData</code> captures format information of a media
    file captured by the device native capture application.</p>

    <dl title="[NoInterfaceObject] interface FormatData" class="idl">
      <dt>attribute DOMString type</dt>
      <dd>The type attribute represents the MIME type of the captured image,
      video or sound. For example, a valid MIME type for images is
      image/jpeg. A valid MIME type for audio files is audio/x-speex or audio/ogg.</dd>

      <dt>attribute DOMString codecs</dt>
      <dd>The type attribute is not enough to determine the format of the
      content since it only specifies the container type. The codecs attribute
      represents the actual format that the audio and video of the content.
      The codecs attribute must conforms to the [[RFC4281]].
      For example, a valid value for H.263 video and AAC low
      complexity would be codecs="s263, mp4a.40.2".</dd>

      <dt>attribute long bitrate </dt>
      <dd>The codecs attribute only specifies the profile and level of the encoded content
      which doesn't specify the actual bitrate. It only specifies the maximum encoded 
      bitrate, thus this bitrate attribute is the average bitrate of the content. In the case
      of a image this attribute has value 0.</dd>

      <dt>attribute unsigned long height </dt>
      <dd>The height attribute represents height of the image or video
      in pixels. In the case of a sound clip this attribute has value 0.</dd>

      <dt>attribute unsigned long width </dt>
      <dd>The width attribute represents width of the image or video
      in pixels. In the case of a sound clip this attribute has value 0.</dd>

      <dt>attribute double duration </dt>
      <dd>The duration attribute represents length of the video or sound
      clip in milliseconds. In the case of a image this attribute has value 0.</dd>
    </dl>
    
    </section>
  </section>

  <section id="formaccess">
    <h2>Capture aware file-select control</h2>


    <p class='note'>
    Add 'source' attribute and make this section normative.
    </p>   

    <p>This section is non-normative.</p>

    <p>If input element in the File Upload state [[HTML5]] contains
    accept attribute with values <code>image/*</code>,
    <code>sound/*</code>, or <code>video/*</code>, the user agent can
    invoke a file picker that allows respectively the user to take a
    picture, record a sound file, or record a video in addition to
    selecting an existing file from the file system.</p>

    <p>See the <a href="#uiexamples">User Interface Examples</a> appendix for the illustration.

    <p>In case the user chooses to capture video, audio, or image
    content, the user agent creates media files on the fly as
    specified in [[HTML5]].</p>

    <pre class="example sh_javascript_dom">&lt;input id="cameraInput" type="file" accept="image/*"&gt; </pre>

    <p>In trusted environments the click event of file input element
    can be synthesised as follows:</p>

    <pre class="example sh_javascript_dom">

&lt;input id="cameraInput" onchange="successCB();" type="file" accept="image/*"&gt; 

&lt;script&gt;

function successCB() {
  // Read the image using file-reader or submit the form
}

document.getElementById('cameraInput').click();

&lt;/script&gt;

</pre>

</section>

<section class='appendix' id="uiexamples">
<h2>User Interface Examples</h2>

<p>Capture API aware file picker might render as:

<p><img alt="A File picker with camera support" src="capture-api-file-picker-concept.png"></p> 
</section>

<section class='appendix' id="future">
<h2>Features for Future Consideration</h2>

<p>This is a list of features that have been discussed with respect to
this version of the API but for which it has been decided that if they
are included it will be in a future revision.

</p>
<ul>
<li>... </li></ul>
</section>
</body>
</html>
