<!DOCTYPE html>
<html>
  <head>
    <title>HTML Media Capture</title>
    <meta http-equiv='Content-Type' content='text/html;charset=utf-8'/>
    <script src='../ReSpec.js/js/respec.js' class='remove'></script>
    <script class='remove'>
      var respecConfig = {
          specStatus:           "ED",
          shortName:            "html-media-capture",
          editors: [
              {name: "Anssi Kostiainen", company: "Nokia"},
              {name: "Ilkka Oksanen", company: "Nokia (until May 10, 2012)"},
              {name: "Dominique Hazaël-Massieux", company: "W3C (until May 10, 2012)"}
          ],
          //publishDate:          "yyyy-mm-dd",
          previousPublishDate:  "2011-04-14",
          previousMaturity:     "WD",
          edDraftURI:           "http://dev.w3.org/2009/dap/camera/",
          // lcEnd: "2009-08-05",
      };
    </script>
    <script src='../common/config.js' class='remove'></script>
  </head>
  <body>
    
    <section id="abstract">
      The HTML Media Capture specification defines HTML form extensions that
      facilitate users' access to media capture capabilities of the hosting device.
    </section>
    
    <section id="sotd">
    </section>
    
    <section class="informative">
      <h2>Introduction</h2>
      <p>
        This specification extends the <code>HTMLInputElement</code> with a new
        <code>capture</code> attribute. The attribute enables content authors
        to give hints of preferred means to capture local media such as images,
        video, and sound, that is to be subsequently uploaded. Conformant user
        agents provide their users more seamless access to the above-mentioned
        media capture capabilities of the hosting device.
      </p>
      <p>
        Access to media streams from the hosting device is out of scope for
        this specification.
      </p>
    </section>

    <section id="conformance">
      <p>
        This specification defines conformance criteria that apply to a single
        product: the <dfn>user agent</dfn> that implements the interfaces that
        it contains.
      </p>
      <p>
        Implementations that use ECMAScript to implement the APIs defined in
        this specification must implement them in a manner consistent with the
        ECMAScript Bindings defined in the Web IDL specification [[!WEBIDL]],
        as this specification uses that specification and terminology.
      </p>
    </section>

    <section id="security">
      <h2>Security and privacy considerations</h2>
      <p>
        This specification builds upon the security and privacy protections
        provided by the <code>&lt;input type="file"&gt;</code> [[!HTML5]] and
        the [[!FILE-API]] specifications; in particular, it is expected that
        any offer to start capturing content from the user’s device would
        require a specific user interaction on an HTML element that is entirely
        controlled by the user agent.
      </p>
      <p>
        Implementors should take care of additional leakage of privacy-sensitive
        data from captured media. For instance, embedding the user’s location in
        a captured media metadata (e.g. EXIF) might transmit more private data
        than the user might be expecting.
      </p>
    </section>
    
    <section id="captureparam">
      <h2>The capture attribute</h2>
      <p>This section is normative.</p>
      <p>
        When an <code>input</code> element's <code>type</code> attribute is in the
        <a href="http://dev.w3.org/html5/spec/states-of-the-type-attribute.html#file-upload-state-type-file">
        File Upload</a> state [[!HTML5]], the rules in this section apply.
      </p>
      <dl title="partial interface HTMLInputElement" class="idl">
        <dt>attribute DOMString capture</dt>
        <dd>
        </dd>
      </dl>
      <p>
        The <code>capture</code> attribute is used as a hint to the
        <a>user agent</a> to invoke a file picker with a specific capture
        <a>control type</a>.
      </p>
      <p>
        The <code>capture</code> attribute controls the capture <a>state</a>
        (and associated file picker control) of the element. It is an
        <a href="http://dev.w3.org/html5/spec/common-microsyntaxes.html#keywords-and-enumerated-attributes">
        enumerated attribute</a> [[!HTML5]]. The following table lists the
        <a>keyword</a>s, <a>state</a>s, and corresponding <a>control type</a>s
        for the attribute.
      </p>
      <table class="simple">
        <tr>
          <th><dfn>Keyword</dfn></th>
          <th><dfn>State</dfn></th>
          <th><dfn>Control type</dfn></th>
        </tr>
        <tr>
          <td><code><dfn>camera</dfn></code></td>
          <td><dfn>Image Capture</dfn></td>
          <td>A camera</td>
        </tr>
        <tr>
          <td><code><dfn>camcorder</dfn></code></td>
          <td><dfn>Video Capture</dfn></td>
          <td>A video camera</td>
        </tr>
        <tr>
          <td><code><dfn>microphone</dfn></code></td>
          <td><dfn>Sound Capture</dfn></td>
          <td>A sound recorder</td>
        </tr>
        <tr>
          <td><code><dfn>filesystem</dfn></code></td>
          <td><dfn>File Upload</dfn> [[!HTML5]]</td>
          <td>A generic file picker</td>
        </tr>
      </table>
      <p>
        The <code>capture</code> attribute's <em>invalid value default</em> and
        <em>missing value default</em> is the <a>File Upload</a> state.
      </p>
      <p>
        The <code>HTMLInputElement</code> interface's <code>accept</code>
        attribute takes precedence over the <code>capture</code> attribute.
        That is, if the <code>accept</code> attribute's value is set to a
        MIME type that is not accepted in a defined capture <a>state</a>, the
        <a>user agent</a> MUST act as if there was no <code>capture</code>
        attribute.
      </p>
      <div class="note">
        This specification complements the following behavior defined in
        <a href="http://dev.w3.org/html5/spec/states-of-the-type-attribute.html#file-upload-state-type-file">
        File Upload State</a> [[!HTML5]]: User agents may use the value of
        [the <code>accept</code>] attribute to display a more appropriate user
        interface than a generic file picker. For instance, given the value
        <code>image/*</code>, a user agent could offer the user the option of
        using a local camera or selecting a photograph from their photo
        collection; given the value <code>audio/*, </code> a user agent could
        offer the user the option of recording a clip using a headset
        microphone.
      </div>
    </section>
    
    <section class="appendix informative">
    <h2>Examples</h2>
    <p>
      The following example indicates that the user is expected to take a
      picture using the device's camera, and upload the picture taken:
    </p>
    <pre class="example sh_html">
      &lt;input type="file" accept="image/*" capture="camera"&gt;
    </pre>
    <p>
      When an <code>input</code> element's <code>capture</code> attribute is
      in the <a>Image Capture</a> state, the file picker may render as
      presented on the right side. When the attribute is in the <a>File
      Upload</a> state, the generic file picker may render as represented on
      the left side.
    </p>
    <p>
      <img alt="A File picker with camera support"
      src="capture-api-file-picker-concept.png">
    </p>
  </section>
  
</body>
</html>
