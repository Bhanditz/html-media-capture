<!DOCTYPE html PUBLIC '-//W3C//DTD HTML 4.01 Transitional//EN' 'http://www.w3.org/TR/html4/loose.dtd'>
<html lang="en" dir="ltr">
<head>

  
    <title>The Capture API</title>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
    
    
    
  <style type="text/css">
/*****************************************************************
 * ReSpec CSS
 * Robin Berjon <robin at berjon dot com>
 * v0.05 - 2009-07-31
 *****************************************************************/


/* --- INLINES --- */
em.rfc2119 { 
    text-transform:     lowercase;
    font-variant:       small-caps;
    font-style:         normal;
    color:              #900;
}

h1 acronym, h2 acronym, h3 acronym, h4 acronym, h5 acronym, h6 acronym, a acronym,
h1 abbr, h2 abbr, h3 abbr, h4 abbr, h5 abbr, h6 abbr, a abbr {
    border: none;
}

dfn {
    font-weight:    bold;
}

a.internalDFN {
    color:  inherit;
    border-bottom:  medium solid #99c;
    text-decoration:    none;
}

a.externalDFN {
    color:  inherit;
    border-bottom:  medium dotted #ccc;
    text-decoration:    none;
}

a.bibref {
    text-decoration:    none;
}

code {
    color:  #ff4500;
}


/* --- WEB IDL --- */
pre.idl {
    border-top: 1px solid #90b8de;
    border-bottom: 1px solid #90b8de;
    padding:    1em;
    line-height:    120%;
}

pre.idl::before {
    content:    "WebIDL";
    display:    block;
    width:      150px;
    background: #90b8de;
    color:  #fff;
    font-family:    initial;
    padding:    3px;
    font-weight:    bold;
    margin: -1em 0 1em -1em;
}

.idlType {
    color:  #ff4500;
    font-weight:    bold;
    text-decoration:    none;
}

/*.idlModule*/
/*.idlModuleID*/
/*.idlInterface*/
.idlInterfaceID {
    font-weight:    bold;
    color:  #005a9c;
}

.idlSuperclass {
    font-style: italic;
    color:  #005a9c;
}

/*.idlAttribute*/
.idlAttrType {
    color:  #005a9c;
}
.idlAttrName {
    color:  #ff4500;
}
.idlAttrName a {
    color:  #ff4500;
    border-bottom:  1px dotted #ff4500;
    text-decoration: none;
}

/*.idlMethod*/
.idlMethType {
    color:  #005a9c;
}
.idlMethName {
    color:  #ff4500;
}
.idlMethName a {
    color:  #ff4500;
    border-bottom:  1px dotted #ff4500;
    text-decoration: none;
}

/*.idlParam*/
.idlParamType {
    color:  #005a9c;
}
.idlParamName {
    font-style: italic;
}

.extAttr {
    color:  #666;
}

/*.idlConst*/
.idlConstType {
    color:  #005a9c;
}
.idlConstName {
    color:  #ff4500;
}
.idlConstName a {
    color:  #ff4500;
    border-bottom:  1px dotted #ff4500;
    text-decoration: none;
}

/*.idlException*/
.idlExceptionID {
    font-weight:    bold;
    color:  #c00;
}

.idlTypedefID, .idlTypedefType {
    color:  #005a9c;
}

.idlRaises, .idlRaises a.idlType, .idlRaises a.idlType code, .excName a, .excName a code {
    color:  #c00;
    font-weight:    normal;
}

.excName a {
    font-family:    monospace;
}

.idlRaises a.idlType, .excName a.idlType {
    border-bottom:  1px dotted #c00;
}

.excGetSetTrue, .excGetSetFalse, .prmNullTrue, .prmNullFalse, .prmOptTrue, .prmOptFalse {
    width:  45px;
    text-align: center;
}
.excGetSetTrue, .prmNullTrue, .prmOptTrue { color:  #0c0; }
.excGetSetFalse, .prmNullFalse, .prmOptFalse { color:  #c00; }

.idlImplements a {
    font-weight:    bold;
}

dl.attributes, dl.methods, dl.constants {
    margin-left:    2em;
}

.attributes dt, .methods dt, .constants dt {
    font-weight:    normal;
}

.attributes dt code, .methods dt code, .constants dt code {
    font-weight:    bold;
    color:  #000;
    font-family:    monospace;
}

.attributes dt code {
    background:  #ffffd2;
}

.attributes dt .idlAttrType code {
    color:  #005a9c;
    background:  transparent;
    font-family:    inherit;
    font-weight:    normal;
    font-style: italic;
}

.methods dt code {
    background:  #d9e6f8;
}

.constants dt code {
    background:  #ddffd2;
}

.attributes dd, .methods dd, .constants dd {
    margin-bottom:  1em;
}

table.parameters, table.exceptions {
    border-spacing: 0;
    border-collapse:    collapse;
    margin: 0.5em 0;
    width:  100%;
}
table.parameters { border-bottom:  1px solid #90b8de; }
table.exceptions { border-bottom:  1px solid #deb890; }

.parameters th, .exceptions th {
    color:  #fff;
    padding:    3px 5px;
    text-align: left;
    font-family:    initial;
    font-weight:    normal;
    text-shadow:    #666 1px 1px 0;
}
.parameters th { background: #90b8de; }
.exceptions th { background: #deb890; }

.parameters td, .exceptions td {
    padding:    3px 10px;
    border-top: 1px solid #ddd;
    vertical-align: top;
}

.parameters tr:first-child td, .exceptions tr:first-child td {
    border-top: none;
}

.parameters td.prmName, .exceptions td.excName, .exceptions td.excCodeName {
    width:  100px;
}

.parameters td.prmType {
    width:  120px;
}

table.exceptions table {
    border-spacing: 0;
    border-collapse:    collapse;
    width:  100%;
}

/* --- TOC --- */
.toc a {
    text-decoration:    none;
}

a .secno {
    color:  #000;
}

/* --- TABLE --- */
table.simple {
    border-spacing: 0;
    border-collapse:    collapse;
    border-bottom:  3px solid #005a9c;
}

.simple th {
    background: #005a9c;
    color:  #fff;
    padding:    3px 5px;
    text-align: left;
}

.simple th[scope="row"] {
    background: inherit;
    color:  inherit;
    border-top: 1px solid #ddd;
}

.simple td {
    padding:    3px 10px;
    border-top: 1px solid #ddd;
}

.simple tr:nth-child(even) {
    background: #f0f6ff;
}

/* --- DL --- */
.section dd > p:first-child {
    margin-top: 0;
}

.section dd > p:last-child {
    margin-bottom: 0;
}

.section dd {
    margin-bottom:  1em;
}

.section dl.attrs dd, .section dl.eldef dd {
    margin-bottom:  0;
}

/* --- EXAMPLES --- */
pre.example {
    border-top: 1px solid #ff4500;
    border-bottom: 1px solid #ff4500;
    padding:    1em;
    margin-top: 1em;
}

pre.example::before {
    content:    "Example";
    display:    block;
    width:      150px;
    background: #ff4500;
    color:  #fff;
    font-family:    initial;
    padding:    3px;
    font-weight:    bold;
    margin: -1em 0 1em -1em;
}

/* --- EDITORIAL NOTES --- */
.issue {
    padding:    1em;
    border: 1px solid #f00;
    background: #ffc;
}

.issue::before {
    content:    "Issue";
    display:    block;
    width:  150px;
    margin: -1.5em 0 0.5em 0;
    font-weight:    bold;
    border: 1px solid #f00;
    background: #fff;
    padding:    3px 1em;
}

.note {
    padding:    1em;
    border: 2px solid #cff6d9;
    background: #e2fff0;
}

.note::before {
    content:    "Note";
    display:    block;
    width:  150px;
    margin: -1.5em 0 0.5em 0;
    font-weight:    bold;
    border: 1px solid #cff6d9;
    background: #fff;
    padding:    3px 1em;
}

/* --- SYNTAX HIGHLIGHTING --- */
pre.sh_sourceCode {
  background-color: white;
  color: black;
  font-style: normal;
  font-weight: normal;
}

pre.sh_sourceCode .sh_keyword { color: #005a9c; font-weight: bold; }           /* language keywords */
pre.sh_sourceCode .sh_type { color: #666; }                            /* basic types */
pre.sh_sourceCode .sh_usertype { color: teal; }                             /* user defined types */
pre.sh_sourceCode .sh_string { color: red; font-family: monospace; }        /* strings and chars */
pre.sh_sourceCode .sh_regexp { color: orange; font-family: monospace; }     /* regular expressions */
pre.sh_sourceCode .sh_specialchar { color: 	#ffc0cb; font-family: monospace; }  /* e.g., \n, \t, \\ */
pre.sh_sourceCode .sh_comment { color: #A52A2A; font-style: italic; }         /* comments */
pre.sh_sourceCode .sh_number { color: purple; }                             /* literal numbers */
pre.sh_sourceCode .sh_preproc { color: #00008B; font-weight: bold; }       /* e.g., #include, import */
pre.sh_sourceCode .sh_symbol { color: blue; }                            /* e.g., <, >, + */
pre.sh_sourceCode .sh_function { color: black; font-weight: bold; }         /* function calls and declarations */
pre.sh_sourceCode .sh_cbracket { color: red; }                              /* block brackets (e.g., {, }) */
pre.sh_sourceCode .sh_todo { font-weight: bold; background-color: #00FFFF; }   /* TODO and FIXME */

/* Predefined variables and functions (for instance glsl) */
pre.sh_sourceCode .sh_predef_var { color: #00008B; }
pre.sh_sourceCode .sh_predef_func { color: #00008B; font-weight: bold; }

/* for OOP */
pre.sh_sourceCode .sh_classname { color: teal; }

/* line numbers (not yet implemented) */
pre.sh_sourceCode .sh_linenum { display: none; }

/* Internet related */
pre.sh_sourceCode .sh_url { color: blue; text-decoration: underline; font-family: monospace; }

/* for ChangeLog and Log files */
pre.sh_sourceCode .sh_date { color: blue; font-weight: bold; }
pre.sh_sourceCode .sh_time, pre.sh_sourceCode .sh_file { color: #00008B; font-weight: bold; }
pre.sh_sourceCode .sh_ip, pre.sh_sourceCode .sh_name { color: #006400; }

/* for Prolog, Perl... */
pre.sh_sourceCode .sh_variable { color: #006400; }

/* for LaTeX */
pre.sh_sourceCode .sh_italics { color: #006400; font-style: italic; }
pre.sh_sourceCode .sh_bold { color: #006400; font-weight: bold; }
pre.sh_sourceCode .sh_underline { color: #006400; text-decoration: underline; }
pre.sh_sourceCode .sh_fixed { color: green; font-family: monospace; }
pre.sh_sourceCode .sh_argument { color: #006400; }
pre.sh_sourceCode .sh_optionalargument { color: purple; }
pre.sh_sourceCode .sh_math { color: orange; }
pre.sh_sourceCode .sh_bibtex { color: blue; }

/* for diffs */
pre.sh_sourceCode .sh_oldfile { color: orange; }
pre.sh_sourceCode .sh_newfile { color: #006400; }
pre.sh_sourceCode .sh_difflines { color: blue; }

/* for css */
pre.sh_sourceCode .sh_selector { color: purple; }
pre.sh_sourceCode .sh_property { color: blue; }
pre.sh_sourceCode .sh_value { color: #006400; font-style: italic; }

/* other */
pre.sh_sourceCode .sh_section { color: black; font-weight: bold; }
pre.sh_sourceCode .sh_paren { color: red; }
pre.sh_sourceCode .sh_attribute { color: #006400; }

</style><link charset="utf-8" type="text/css" rel="stylesheet" href="http://www.w3.org/StyleSheets/TR/W3C-WD"></head><body style="display: inherit;"><div class="head"><p><a href="http://www.w3.org/"><img src="http://www.w3.org/Icons/w3c_home" alt="W3C" height="48" width="72"></a></p><h1 class="title" id="title">The Capture <acronym title="Application Programming Interface">API</acronym></h1><h2 id="w3c-working-draft-01-april-2010"><acronym title="World Wide Web Consortium">W3C</acronym> Working Draft 01 April 2010</h2><dl><dt>This Version:</dt><dd><a href="http://www.w3.org/TR/2010/WD-capture-api-20100401/">http://www.w3.org/TR/2010/WD-capture-api-20100401/</a></dd><dt>Latest Published Version:</dt><dd><a href="http://www.w3.org/TR/capture-api/">http://www.w3.org/TR/capture-api/</a></dd><dt>Latest Editor's Draft:</dt><dd><a href="http://dev.w3.org/2009/dap/camera/">http://dev.w3.org/2009/dap/camera/</a></dd><dt>Editors:</dt><dd>Dzung D Tran, Intel</dd><dd>Ilkka Oksanen, Nokia</dd><dd>Ingmar Kliche, Deutsche Telekom</dd></dl><p class="copyright"><a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2010 <a href="http://www.w3.org/"><acronym title="World Wide Web Consortium"><acronym title="World Wide Web Consortium">W3C</acronym></acronym></a><sup>®</sup> (<a href="http://www.csail.mit.edu/"><acronym title="Massachusetts Institute of Technology"><acronym title="Massachusetts Institute of Technology">MIT</acronym></acronym></a>, <a href="http://www.ercim.eu/"><acronym title="European Research Consortium for Informatics and Mathematics"><acronym title="European Research Consortium for Informatics and Mathematics">ERCIM</acronym></acronym></a>, <a href="http://www.keio.ac.jp/">Keio</a>), All Rights Reserved. <acronym title="World Wide Web Consortium">W3C</acronym> <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a href="http://www.w3.org/Consortium/Legal/copyright-documents">document use</a> rules apply.</p><hr></div>
  
    <div class="introductory section" id="abstract"><h2 id="abstract-1">Abstract</h2>
      This specification defines an Application Programming Interface
      (<acronym title="Application Programming Interface"><acronym title="Application Programming Interface">API</acronym></acronym>)
      that provides access to the audio, image and video capture
      capabilities of the device.  
    </div><div id="sotd" class="introductory section"><h2 id="status-of-this-document">Status of This Document</h2><p><em>This section describes the status of this document at the time of its publication. Other documents may supersede this document. A list of current <acronym title="World Wide Web Consortium">W3C</acronym> publications and the latest revision of this technical report can be found in the <a href="http://www.w3.org/TR/"><acronym title="World Wide Web Consortium">W3C</acronym> technical reports index</a> at http://www.w3.org/TR/.</em></p>
      <p>This document represents the early consensus of the group on
      the scope and features of the proposed Capture
      <acronym title="Application Programming Interface">API</acronym>. Issues and editors notes in the document highlight some of
      the points on which the group is still working and would
      particularly like to get feedback.</p>
    <p>This document was published by the <a href="http://www.w3.org/2009/dap/">Device APIs and Policy Working Group</a> as a First Public Working Draft. This document is intended to become a <acronym title="World Wide Web Consortium">W3C</acronym> Recommendation. If you wish to make comments regarding this document, please send them to <a href="mailto:public-device-apis@w3.org">public-device-apis@w3.org</a> (<a href="mailto:public-device-apis-request@w3.org?subject=subscribe">subscribe</a>, <a href="http://lists.w3.org/Archives/Public/public-device-apis/">archives</a>). All feedback is welcome.</p><p>Publication as a Working Draft does not imply endorsement by the <acronym title="World Wide Web Consortium">W3C</acronym> Membership. This is a draft document and may be updated, replaced or obsoleted by other documents at any time. It is inappropriate to cite this document as other than work in progress.</p><p>This document was produced by a group operating under the <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/">5 February 2004 <acronym title="World Wide Web Consortium">W3C</acronym> Patent Policy</a>. <acronym title="World Wide Web Consortium">W3C</acronym> maintains a <a href="http://www.w3.org/2004/01/pp-impl/43696/status" rel="disclosure">public list of any patent disclosures</a> made in connection with the deliverables of the group; that page also includes instructions for disclosing a patent. An individual who has actual knowledge of a patent which the individual believes contains <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">Essential Claim(s)</a> must disclose the information in accordance with <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">section 6 of the <acronym title="World Wide Web Consortium">W3C</acronym> Patent Policy</a>.</p></div><div class="section" id="toc"><h2 id="table-of-contents" class="introductory">Table of Contents</h2><ul class="toc"><li class="tocline"><a class="tocxref" href="#introduction"><span class="secno">1. </span>Introduction</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#examples"><span class="secno">1.1 </span>Usage Examples</a></li></ul></li><li class="tocline"><a class="tocxref" href="#security"><span class="secno">2. </span>Security and Privacy Considerations</a></li><li class="tocline"><a class="tocxref" href="#api"><span class="secno">3. </span><acronym title="Application Programming Interface">API</acronym> Description</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#capture-interface"><span class="secno">3.1 </span><span class="idlType formerLink idlType"><code>Capture</code></span> interface</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#attributes"><span class="secno">3.1.1 </span>Attributes</a></li><li class="tocline"><a class="tocxref" href="#methods"><span class="secno">3.1.2 </span>Methods</a></li></ul></li><li class="tocline"><a class="tocxref" href="#mediafile"><span class="secno">3.2 </span><span class="idlType formerLink idlType"><code>MediaFile</code></span> interface</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#attributes-1"><span class="secno">3.2.1 </span>Attributes</a></li></ul></li><li class="tocline"><a class="tocxref" href="#formatdata"><span class="secno">3.3 </span><span class="idlType formerLink idlType"><code>FormatData</code></span> interface</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#attributes-2"><span class="secno">3.3.1 </span>Attributes</a></li></ul></li><li class="tocline"><a class="tocxref" href="#capturecallbak"><span class="secno">3.4 </span><span class="idlType formerLink idlType"><code>CaptureCB</code></span> interface</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#methods-1"><span class="secno">3.4.1 </span>Methods</a></li></ul></li><li class="tocline"><a class="tocxref" href="#mediaarray"><span class="secno">3.5 </span><span class="formerLink">MediaArray</span> typedef</a></li><li class="tocline"><a class="tocxref" href="#errorcallback"><span class="secno">3.6 </span><span class="idlType formerLink idlType"><code>CaptureErrorCB</code></span> interface</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#methods-2"><span class="secno">3.6.1 </span>Methods</a></li></ul></li><li class="tocline"><a class="tocxref" href="#viewfindercallback"><span class="secno">3.7 </span><span class="idlType formerLink idlType"><code>ViewFinderCB</code></span> interface</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#methods-3"><span class="secno">3.7.1 </span>Methods</a></li></ul></li><li class="tocline"><a class="tocxref" href="#viewfindererrorcallback"><span class="secno">3.8 </span><span class="idlType formerLink idlType"><code>ViewFinderErrorCB</code></span> interface</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#methods-4"><span class="secno">3.8.1 </span>Methods</a></li></ul></li><li class="tocline"><a class="tocxref" href="#captureerror"><span class="secno">3.9 </span><span class="idlType formerLink idlType"><code>CaptureError</code></span> interface</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#attributes-3"><span class="secno">3.9.1 </span>Attributes</a></li><li class="tocline"><a class="tocxref" href="#constants"><span class="secno">3.9.2 </span>Constants</a></li></ul></li><li class="tocline"><a class="tocxref" href="#captureimageoptions"><span class="secno">3.10 </span><span class="idlType formerLink idlType"><code>CaptureImageOptions</code></span> interface</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#attributes-4"><span class="secno">3.10.1 </span>Attributes</a></li></ul></li><li class="tocline"><a class="tocxref" href="#capturevideooptions"><span class="secno">3.11 </span><span class="idlType formerLink idlType"><code>CaptureVideoOptions</code></span> interface</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#attributes-5"><span class="secno">3.11.1 </span>Attributes</a></li></ul></li><li class="tocline"><a class="tocxref" href="#captureaudiooptions"><span class="secno">3.12 </span><span class="idlType formerLink idlType"><code>CaptureAudioOptions</code></span> interface</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#attributes-6"><span class="secno">3.12.1 </span>Attributes</a></li></ul></li><li class="tocline"><a class="tocxref" href="#pendingoperation"><span class="secno">3.13 </span><span class="idlType formerLink idlType"><code>PendingOperation</code></span> interface</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#methods-5"><span class="secno">3.13.1 </span>Methods</a></li></ul></li><li class="tocline"><a class="tocxref" href="#viewfinder-interface"><span class="secno">3.14 </span><span class="idlType formerLink idlType"><code>ViewFinder</code></span> interface</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#methods-6"><span class="secno">3.14.1 </span>Methods</a></li></ul></li></ul></li><li class="tocline"><a class="tocxref" href="#formaccess"><span class="secno">4. </span>Capture Input Selection</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#capture"><span class="secno">4.1 </span>Capture aware file-select control</a></li><li class="tocline"><a class="tocxref" href="#viewfinder"><span class="secno">4.2 </span>ViewFinder aware file-select control</a></li></ul></li><li class="tocline"><a class="tocxref" href="#related"><span class="secno">A. </span>Related documents</a></li><li class="tocline"><a class="tocxref" href="#uiexamples"><span class="secno">B. </span>User Interface Examples</a></li><li class="tocline"><a class="tocxref" href="#future"><span class="secno">C. </span>Features for Future Consideration</a></li><li class="tocline"><a class="tocxref" href="#ack"><span class="secno">D. </span>Acknowledgements</a></li><li class="tocline"><a class="tocxref" href="#references"><span class="secno">E. </span>References</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#normative-references"><span class="secno">E.1 </span>Normative references</a></li><li class="tocline"><a class="tocxref" href="#informative-references"><span class="secno">E.2 </span>Informative references</a></li></ul></li></ul></div>

    

    <div class="section" id="introduction">
    <!--OddPage--><h2 id="x1.-introduction"><span class="secno">1. </span>Introduction</h2>

    <p>The Capture <acronym title="Application Programming Interface">API</acronym> defines a high-level interface for accessing the
    microphone and camera of a hosting device.</p>

      <div class="section" id="examples">
      <h3 id="x1.1-usage-examples"><span class="secno">1.1 </span>Usage Examples</h3>

        <p>The following code extracts illustrate how to work with a
        camera service in the hosting device:</p>

	<div>
	<p>Launching a device camera application and retrieving the
	pictures taken. </p>

        <pre class="example sh_javascript_dom sh_sourceCode"><span class="sh_keyword">function</span> <span class="sh_function">success</span><span class="sh_symbol">(</span>data<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
  <span class="sh_keyword">var</span> container <span class="sh_symbol">=</span> <span class="sh_predef_var">document</span><span class="sh_symbol">.</span><span class="sh_function">createElement</span><span class="sh_symbol">(</span><span class="sh_string">"div"</span><span class="sh_symbol">);</span>
  <span class="sh_predef_var">document</span><span class="sh_symbol">.</span>body<span class="sh_symbol">.</span><span class="sh_function">appendChild</span><span class="sh_symbol">(</span>container<span class="sh_symbol">);</span>
  
  <span class="sh_keyword">for</span> <span class="sh_symbol">(</span><span class="sh_keyword">var</span> i <span class="sh_keyword">in</span> data<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
    <span class="sh_keyword">var</span> img <span class="sh_symbol">=</span> <span class="sh_predef_var">document</span><span class="sh_symbol">.</span><span class="sh_function">createElement</span><span class="sh_symbol">(</span><span class="sh_string">"img"</span><span class="sh_symbol">);</span>
    img<span class="sh_symbol">.</span>src <span class="sh_symbol">=</span> data<span class="sh_symbol">[</span>i<span class="sh_symbol">].</span>uri<span class="sh_symbol">;</span>
    container<span class="sh_symbol">.</span><span class="sh_function">appendChild</span><span class="sh_symbol">(</span>img<span class="sh_symbol">);</span>
  <span class="sh_cbracket">}</span>
<span class="sh_cbracket">}</span>
 
<span class="sh_keyword">function</span> <span class="sh_function">error</span><span class="sh_symbol">(</span>err<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
  <span class="sh_predef_func">alert</span><span class="sh_symbol">(</span>err<span class="sh_symbol">.</span>message <span class="sh_symbol">+</span> <span class="sh_string">" ("</span> <span class="sh_symbol">+</span> err<span class="sh_symbol">.</span>code <span class="sh_symbol">+</span> <span class="sh_string">")"</span><span class="sh_symbol">);</span> 
<span class="sh_cbracket">}</span>
 
<span class="sh_predef_var">navigator</span><span class="sh_symbol">.</span>device<span class="sh_symbol">.</span><span class="sh_function">captureImage</span><span class="sh_symbol">(</span>success<span class="sh_symbol">,</span> error<span class="sh_symbol">,</span> <span class="sh_cbracket">{</span> maxNumberOfMediaFiles<span class="sh_symbol">:</span> <span class="sh_number">1</span> <span class="sh_cbracket">}</span><span class="sh_symbol">);</span></pre>
        </div>
        <div>	

	<p>Example of retrieving image sizes and formats supported by hosting
        device camera.</p>

	<pre class="example sh_javascript_dom sh_sourceCode"><span class="sh_keyword">var</span> summary<span class="sh_symbol">,</span>

formats <span class="sh_symbol">=</span> <span class="sh_predef_var">navigator</span><span class="sh_symbol">.</span>device<span class="sh_symbol">.</span>supportedImageFormats<span class="sh_symbol">;</span>

<span class="sh_keyword">for</span> <span class="sh_symbol">(</span><span class="sh_keyword">var</span> key <span class="sh_keyword">in</span> formats<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
  summary <span class="sh_symbol">+=</span> key <span class="sh_symbol">+</span> <span class="sh_string">": "</span> <span class="sh_symbol">+</span> formats<span class="sh_symbol">[</span>key<span class="sh_symbol">]</span> <span class="sh_symbol">+</span> <span class="sh_string">"</span><span class="sh_specialchar">\n</span><span class="sh_string">"</span><span class="sh_symbol">;</span>
<span class="sh_cbracket">}</span>

<span class="sh_predef_func">alert</span><span class="sh_symbol">(</span>summary<span class="sh_symbol">);</span></pre>
        </div>
      </div>
    </div>

    <div class="section" id="security">
    <!--OddPage--><h2 id="x2.-security-and-privacy-considerations"><span class="secno">2. </span>Security and Privacy Considerations</h2>

    <p class="note">
       <strong>This section is under development.</strong>
    </p>   

    <p>The <acronym title="Application Programming Interface">API</acronym> defined in this specification launches the capture
    application which allows the user to take pictures, record voice or
    record video and provides a handle to the content. This information
    can potentially compromise user privacy and a conforming
    implementation of this specification <em title="must" class="rfc2119">must</em> provide a mechanism that
    protects the user's privacy and this mechanism should ensure that such
    operations <em title="must" class="rfc2119">must</em> be authenticated.</p>

    <h3 id="privacy-considerations-for-implementers-of-capture-api">Privacy considerations for implementers of Capture <acronym title="Application Programming Interface">API</acronym></h3>

    <p>A conforming implementation of this specification <em title="must" class="rfc2119">must</em> provide a
    mechanism that protects the user's privacy and this mechanism <em title="should" class="rfc2119">should</em>
    ensure that privacy information is not revealed without user's
    informed consent.</p>

    </div>

    <div class="section" id="api">
    <!--OddPage--><h2 id="x3.-api-description"><span class="secno">3. </span><acronym title="Application Programming Interface">API</acronym> Description</h2>

      <div class="section" id="capture-interface">
      <h3 id="x3.1-capture-interface"><span class="secno">3.1 </span><a class="idlType" href="#idl-def-Capture"><code>Capture</code></a> interface</h3>

      <p>The <code>Capture</code> interface exposes an interface to the
      camera and microphone of the hosting device.</p>

      <p>Objects implementing the <code>NavigatorDevice</code>
      interface (e.g. the <code>window.navigator.device</code> object
      in Web browsers [<a href="#bib-NAVIGATOR" rel="biblioentry" class="bibref">NAVIGATOR</a>]) provide access to the
      <code>Capture</code> interface through the <code>Capture</code>
      interface. An instance of <code>Capture</code> would be then
      obtained by using binding-specific casting methods on an
      instance of <code>NavigatorDevice</code>.</p>

      <pre class="idl"><span class="idlInterface" id="idl-def-Capture">[<span class="extAttr">Supplemental, NoInterfaceObject</span>]
interface <span class="idlInterfaceID">Capture</span> {
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a class="idlType" href="#idl-def-FormatData"><code>FormatData</code></a>[]</span> <span class="idlAttrName"><a href="#widl-Capture-supportedImageFormats">supportedImageFormats</a></span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a class="idlType" href="#idl-def-FormatData"><code>FormatData</code></a>[]</span> <span class="idlAttrName"><a href="#widl-Capture-supportedVideoFormats">supportedVideoFormats</a></span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a class="idlType" href="#idl-def-FormatData"><code>FormatData</code></a>[]</span> <span class="idlAttrName"><a href="#widl-Capture-supportedAudioFormats">supportedAudioFormats</a></span>;</span>
<span class="idlMethod">    <span class="idlMethType"><a class="idlType" href="#idl-def-PendingOperation"><code>PendingOperation</code></a></span> <span class="idlMethName"><a href="#widl-Capture-captureImage">captureImage</a></span> (<span class="idlParam">in <span class="idlParamType"><a class="idlType" href="#idl-def-CaptureCB"><code>CaptureCB</code></a></span> <span class="idlParamName">successCB</span></span>, <span class="idlParam">in optional <span class="idlParamType"><a class="idlType" href="#idl-def-CaptureErrorCB"><code>CaptureErrorCB</code></a>?</span> <span class="idlParamName">errorCB</span></span>, <span class="idlParam">in optional <span class="idlParamType"><a class="idlType" href="#idl-def-CaptureImageOptions"><code>CaptureImageOptions</code></a></span> <span class="idlParamName">options</span></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a class="idlType" href="#idl-def-PendingOperation"><code>PendingOperation</code></a></span> <span class="idlMethName"><a href="#widl-Capture-captureVideo">captureVideo</a></span> (<span class="idlParam">in <span class="idlParamType"><a class="idlType" href="#idl-def-CaptureCB"><code>CaptureCB</code></a></span> <span class="idlParamName">successCB</span></span>, <span class="idlParam">in optional <span class="idlParamType"><a class="idlType" href="#idl-def-CaptureErrorCB"><code>CaptureErrorCB</code></a>?</span> <span class="idlParamName">errorCB</span></span>, <span class="idlParam">in optional <span class="idlParamType"><a class="idlType" href="#idl-def-CaptureVideoOptions"><code>CaptureVideoOptions</code></a></span> <span class="idlParamName">options</span></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a class="idlType" href="#idl-def-PendingOperation"><code>PendingOperation</code></a></span> <span class="idlMethName"><a href="#widl-Capture-captureAudio">captureAudio</a></span> (<span class="idlParam">in <span class="idlParamType"><a class="idlType" href="#idl-def-CaptureCB"><code>CaptureCB</code></a></span> <span class="idlParamName">successCB</span></span>, <span class="idlParam">in optional <span class="idlParamType"><a class="idlType" href="#idl-def-CaptureErrorCB"><code>CaptureErrorCB</code></a>?</span> <span class="idlParamName">errorCB</span></span>, <span class="idlParam">in optional <span class="idlParamType"><a class="idlType" href="#idl-def-CaptureAudioOptions"><code>CaptureAudioOptions</code></a></span> <span class="idlParamName">options</span></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a class="idlType" href="#idl-def-PendingOperation"><code>PendingOperation</code></a></span> <span class="idlMethName"><a href="#widl-Capture-getViewFinder">getViewFinder</a></span> (<span class="idlParam">in <span class="idlParamType"><a class="idlType" href="#idl-def-ViewFinderCB"><code>ViewFinderCB</code></a></span> <span class="idlParamName">successCB</span></span>, <span class="idlParam">in optional <span class="idlParamType"><a class="idlType" href="#idl-def-ViewFinderErrorCB"><code>ViewFinderErrorCB</code></a>?</span> <span class="idlParamName">errorCB</span></span>);</span>
};</span>
</pre><div class="section" id="attributes"><h4 id="x3.1.1-attributes"><span class="secno">3.1.1 </span>Attributes</h4><dl class="attributes"><dt id="widl-Capture-supportedAudioFormats"><code>supportedAudioFormats</code> of type array of <span class="idlAttrType"><a class="idlType" href="#idl-def-FormatData"><code>FormatData</code></a></span>, readonly</dt><dd>An array of FormatData objects which contains audio
      formats supported by the hosting device microphone.<div><em>No exceptions.</em></div></dd><dt id="widl-Capture-supportedImageFormats"><code>supportedImageFormats</code> of type array of <span class="idlAttrType"><a class="idlType" href="#idl-def-FormatData"><code>FormatData</code></a></span>, readonly</dt><dd>An array of FormatData objects which contains image sizes
      and formats supported by the hosting device camera.<div><em>No exceptions.</em></div></dd><dt id="widl-Capture-supportedVideoFormats"><code>supportedVideoFormats</code> of type array of <span class="idlAttrType"><a class="idlType" href="#idl-def-FormatData"><code>FormatData</code></a></span>, readonly</dt><dd>An array of FormatData objects which contains video
      resolutions and formats supported by the hosting device
      camera.<div><em>No exceptions.</em></div></dd></dl></div><div class="section" id="methods"><h4 id="x3.1.2-methods"><span class="secno">3.1.2 </span>Methods</h4><dl class="methods"><dt id="widl-Capture-captureAudio"><code>captureAudio</code></dt><dd><p>Launch device native audio recorder application for
      recording audio clip(s).</p>
      
      <p>This method takes two or three arguments. When called, it
      immediately returns a <a href="#pendingoperation">
      <code>PendingOperation</code></a> object and then asynchronously
      start a <em>capture audio</em> process defined as follows:</p>

      <p></p>

      <ol>

      <li>Start native audio recorder application. Allow end user to record
      audio clip(s) and return.</li>

      <li>If successful, invoke the associated <code>successCB</code>
      with a <a href="#mediaarray"> <code>MediaArray</code></a>
      argument. If the attempt fails, and the method was invoked with a
      non-null <code>errorCallback</code> argument, this method must invoke
      the <code>errorCallback</code> with a <a href="#captureerror"><code>CaptureError</code></a> object as
      an argument.</li>

      <li>If a <code>CaptureAudioOptions</code> parameter was present,
      and its <code>maxNumberOfMediaFiles</code> attribute was defined,
      <code>successCB</code> <em title="must" class="rfc2119">must</em> be invoked after the user has
      captured a number of audio clips defined in
      <code>maxNumberOfMediaFiles</code>.  If user exited the native camera
      application prematurely, <code>errorCB</code> must be invoked.
      </li> 

      </ol>

      <p></p>

      
      <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">successCB</td><td class="prmType"><code><a class="idlType" href="#idl-def-CaptureCB"><code>CaptureCB</code></a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">Function to call when the asynchronous operation completes </td></tr><tr><td class="prmName">errorCB</td><td class="prmType"><code><a class="idlType" href="#idl-def-CaptureErrorCB"><code>CaptureErrorCB</code></a></code></td><td class="prmNullTrue">✔</td><td class="prmOptTrue">✔</td><td class="prmDesc">Function to call when the asynchronous operation fails. This
	parameter is <em title="optional" class="rfc2119">optional</em>.</td></tr><tr><td class="prmName">options</td><td class="prmType"><code><a class="idlType" href="#idl-def-CaptureAudioOptions"><code>CaptureAudioOptions</code></a></code></td><td class="prmNullFalse">✘</td><td class="prmOptTrue">✔</td><td class="prmDesc">Audio capture options. This parameter is <em title="optional" class="rfc2119">optional</em>.</td></tr></table><div><em>No exceptions.</em></div><div><em>Return type: </em><code><a class="idlType" href="#idl-def-PendingOperation"><code>PendingOperation</code></a></code></div></dd><dt id="widl-Capture-captureImage"><code>captureImage</code></dt><dd><p>Launch device native camera application for taking
      image(s).</p>

      <p>This method takes two or three arguments. When called, it
      immediately returns a <a href="#pendingoperation"><code>PendingOperation</code></a>
      object and then asynchronously start a <em>capture image</em>
      process defined as follows:</p>

      <p></p>

      <ol>

      <li>Start native camera application. Allow end user to take
      picture(s).</li>

      <li>If successful, invoke the associated <code>successCB</code>
      with a <a href="#mediaarray"> <code>MediaArray</code></a>
      argument. If the attempt fails, and the method was invoked with a
      non-null <code>errorCallback</code> argument, this method must
      invoke the <code>errorCallback</code> with a <a href="#captureerror"><code>CaptureError</code></a> object
      as an argument.</li>

      <li>If a <code>CaptureImageOptions</code> parameter was present,
      and its <code>maxNumberOfMediaFiles</code> attribute was defined,
      <code>successCB</code> <em title="must" class="rfc2119">must</em> be invoked after the user has
      captured a number of images defined in <code>maxNumberOfMediaFiles</code>.  If
      user exited the native camera application prematurely,
      <code>errorCB</code> must be invoked.</li> </ol>
      
      <p></p>

      	
    
      <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">successCB</td><td class="prmType"><code><a class="idlType" href="#idl-def-CaptureCB"><code>CaptureCB</code></a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">Function to call when the asynchronous operation completes </td></tr><tr><td class="prmName">errorCB</td><td class="prmType"><code><a class="idlType" href="#idl-def-CaptureErrorCB"><code>CaptureErrorCB</code></a></code></td><td class="prmNullTrue">✔</td><td class="prmOptTrue">✔</td><td class="prmDesc">Function to call when the asynchronous operation
        fails. This parameter is <em title="optional" class="rfc2119">optional</em>.</td></tr><tr><td class="prmName">options</td><td class="prmType"><code><a class="idlType" href="#idl-def-CaptureImageOptions"><code>CaptureImageOptions</code></a></code></td><td class="prmNullFalse">✘</td><td class="prmOptTrue">✔</td><td class="prmDesc">Image capture options. This parameter is <em title="optional" class="rfc2119">optional</em>.</td></tr></table><div><em>No exceptions.</em></div><div><em>Return type: </em><code><a class="idlType" href="#idl-def-PendingOperation"><code>PendingOperation</code></a></code></div></dd><dt id="widl-Capture-captureVideo"><code>captureVideo</code></dt><dd>

      <p>Launch device native camera application for recording
      video(s).</p>

      <p>This method takes three or four arguments. When called, it
      immediately returns a <a href="#pendingoperation"><code>PendingOperation</code></a>
      object and then asynchronously start a <em>capture video</em> process
      defined as follows:</p>

      <p></p>

      <ol>

      <li>Start native video camera application. Allow end user to
      take video(s) and return.  </li><li>If successful, invoke the
      associated <code>successCB</code> with a <a href="#mediaarray"> <code>MediaArray</code></a> argument. If
      the attempt fails, and the method was invoked with a non-null
      <code>errorCallback</code> argument, this method must invoke the
      <code>errorCallback</code> with a <a href="#captureerror"><code>CaptureError</code></a> object as
      an argument.</li>

      <li>If a <code>CaptureVideoOptions</code> parameter was present, and
      its <code>maxNumberOfMediaFiles</code> attribute was defined,
      <code>successCB</code> <em title="must" class="rfc2119">must</em> be invoked after the user has
      captured a number of video clips defined in
      <code>maxNumberOfMediaFiles</code>.  If user exited the native camera
      application prematurely, <code>errorCB</code> must be invoked.</li>

      <li>If a <code>CaptureVideoOptions</code> parameter was present,
      and its <code>duration</code> attribute was defined,
      <code>successCB</code> <em title="must" class="rfc2119">must</em> be invoked after the video has
      been captured for the number of milliseconds defined in
      <code>duration</code>.  If user exited the native camera
      application prematurely, <code>errorCB</code> must be invoked.
      </li>

      </ol> 

      <p></p>

      

      <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">successCB</td><td class="prmType"><code><a class="idlType" href="#idl-def-CaptureCB"><code>CaptureCB</code></a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">Function to call when the asynchronous operation completes </td></tr><tr><td class="prmName">errorCB</td><td class="prmType"><code><a class="idlType" href="#idl-def-CaptureErrorCB"><code>CaptureErrorCB</code></a></code></td><td class="prmNullTrue">✔</td><td class="prmOptTrue">✔</td><td class="prmDesc">Function to call when the asynchronous operation fails. This
	parameter is <em title="optional" class="rfc2119">optional</em>.</td></tr><tr><td class="prmName">options</td><td class="prmType"><code><a class="idlType" href="#idl-def-CaptureVideoOptions"><code>CaptureVideoOptions</code></a></code></td><td class="prmNullFalse">✘</td><td class="prmOptTrue">✔</td><td class="prmDesc">Image capture options. This parameter is <em title="optional" class="rfc2119">optional</em>.</td></tr></table><div><em>No exceptions.</em></div><div><em>Return type: </em><code><a class="idlType" href="#idl-def-PendingOperation"><code>PendingOperation</code></a></code></div></dd><dt id="widl-Capture-getViewFinder"><code>getViewFinder</code></dt><dd>

      <p>This method takes one or two arguments. When called, it
      immediately returns a <a href="#pendingoperation"><code>PendingOperation</code></a>
      object and then tries asynchronously to return the ViewFinder object of the
      active capture device selected by the system or user.</p>
      
      <p class="note">User consent must be verified.</p>   

      <p>If successful, invokes the associated <code>ViewFinderCB</code>
      with a <a href="#viewfinder-interface"> <code>ViewFinder</code></a>
      argument. If the attempt fails, and the method was invoked with a
      non-null <code>errorCallback</code> argument, this method must invoke
      the <code>errorCB</code> with a <a href="#captureerror"><code>CaptureError</code></a> object as
      an argument.</p>

      	
      <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">successCB</td><td class="prmType"><code><a class="idlType" href="#idl-def-ViewFinderCB"><code>ViewFinderCB</code></a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">Function to call when the asynchronous operation completes </td></tr><tr><td class="prmName">errorCB</td><td class="prmType"><code><a class="idlType" href="#idl-def-ViewFinderErrorCB"><code>ViewFinderErrorCB</code></a></code></td><td class="prmNullTrue">✔</td><td class="prmOptTrue">✔</td><td class="prmDesc">Function to call when the asynchronous operation
        fails. This parameter is <em title="optional" class="rfc2119">optional</em>.</td></tr></table><div><em>No exceptions.</em></div><div><em>Return type: </em><code><a class="idlType" href="#idl-def-PendingOperation"><code>PendingOperation</code></a></code></div></dd></dl></div>
    </div>

    <div class="section" id="mediafile"><h3 id="x3.2-mediafile-interface"><span class="secno">3.2 </span><a class="idlType" href="#idl-def-MediaFile"><code>MediaFile</code></a> interface</h3>

    <p><code>MediaFile</code> captures a single photo, video or sound
    captured by the device native capture application. It inherits
    from <code>File</code> [<a href="#bib-FILE-API" rel="biblioentry" class="bibref">FILE-API</a>]</p>

    <pre class="idl"><span class="idlInterface" id="idl-def-MediaFile">[<span class="extAttr">NoInterfaceObject</span>]
interface <span class="idlInterfaceID">MediaFile</span> : <span class="idlSuperclass"><a>File</a></span> {
<span class="idlAttribute">    attribute <span class="idlAttrType"><a class="idlType" href="#idl-def-FormatData"><code>FormatData</code></a></span> <span class="idlAttrName"><a href="#widl-MediaFile-format">format</a></span>;</span>
};</span>
</pre><div class="section" id="attributes-1"><h4 id="x3.2.1-attributes"><span class="secno">3.2.1 </span>Attributes</h4><dl class="attributes"><dt id="widl-MediaFile-format"><code>format</code> of type <span class="idlAttrType"><a class="idlType" href="#idl-def-FormatData"><code>FormatData</code></a></span></dt><dd>The format attribute represents the format information of <a href="#formatdata"><code>MediaFile</code></a>
    object.<div><em>No exceptions.</em></div></dd></dl></div>

    </div>

    <div class="section" id="formatdata"><h3 id="x3.3-formatdata-interface"><span class="secno">3.3 </span><a class="idlType" href="#idl-def-FormatData"><code>FormatData</code></a> interface</h3>

    <p><code>FormatData</code> captures format information of a media
    file captured by the device native capture application.</p>

    <pre class="idl"><span class="idlInterface" id="idl-def-FormatData">[<span class="extAttr">NoInterfaceObject</span>]
interface <span class="idlInterfaceID">FormatData</span> {
<span class="idlAttribute">    attribute <span class="idlAttrType"><a>DOMString</a></span>     <span class="idlAttrName"><a href="#widl-FormatData-type">type</a></span>;</span>
<span class="idlAttribute">    attribute <span class="idlAttrType"><a>unsigned long</a></span> <span class="idlAttrName"><a href="#widl-FormatData-height">height</a></span>;</span>
<span class="idlAttribute">    attribute <span class="idlAttrType"><a>double</a></span>        <span class="idlAttrName"><a href="#widl-FormatData-duration">duration</a></span>;</span>
<span class="idlAttribute">    attribute <span class="idlAttrType"><a>unsigned long</a></span> <span class="idlAttrName"><a href="#widl-FormatData-width">width</a></span>;</span>
};</span>
</pre><div class="section" id="attributes-2"><h4 id="x3.3.1-attributes"><span class="secno">3.3.1 </span>Attributes</h4><dl class="attributes"><dt id="widl-FormatData-duration"><code>duration</code> of type <span class="idlAttrType"><a>double</a></span></dt><dd>The duration attribute represents length of the video or sound
      clip in milliseconds. In the case of a image this attribute has value 0.<div><em>No exceptions.</em></div></dd><dt id="widl-FormatData-height"><code>height</code> of type <span class="idlAttrType"><a>unsigned long</a></span></dt><dd>The height attribute represents height of the image or video
      in pixels. In the case of a sound clip this attribute has value 0.<div><em>No exceptions.</em></div></dd><dt id="widl-FormatData-type"><code>type</code> of type <span class="idlAttrType"><a>DOMString</a></span></dt><dd>The type attribute represents the MIME type of the captured image,
      video or sound. For example, a valid MIME type for JPEG images is
      image/jpeg. A valid MIME type for WAV sound file is audio/x-wav.<div><em>No exceptions.</em></div></dd><dt id="widl-FormatData-width"><code>width</code> of type <span class="idlAttrType"><a>unsigned long</a></span></dt><dd>The width attribute represents width of the image or video
      in pixels. In the case of a sound clip this attribute has value 0.<div><em>No exceptions.</em></div></dd></dl></div>
    
    </div>

    <div class="section" id="capturecallbak"><h3 id="x3.4-capturecb-interface"><span class="secno">3.4 </span><a class="idlType" href="#idl-def-CaptureCB"><code>CaptureCB</code></a> interface</h3>

    <pre class="idl"><span class="idlInterface" id="idl-def-CaptureCB">[<span class="extAttr">Callback=FunctionOnly, NoInterfaceObject</span>]
interface <span class="idlInterfaceID">CaptureCB</span> {
<span class="idlMethod">    <span class="idlMethType"><a>void</a></span> <span class="idlMethName"><a href="#widl-CaptureCB-onSuccess">onSuccess</a></span> (<span class="idlParam">in <span class="idlParamType"><a>MediaArray</a></span> <span class="idlParamName">capturedMedia</span></span>);</span>
};</span>
</pre><div class="section" id="methods-1"><h4 id="x3.4.1-methods"><span class="secno">3.4.1 </span>Methods</h4><dl class="methods"><dt id="widl-CaptureCB-onSuccess"><code>onSuccess</code></dt><dd>
      
    <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">capturedMedia</td><td class="prmType"><code><a>MediaArray</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">Sequence
      of MediaFile successfully captured by the device</td></tr></table><div><em>No exceptions.</em></div><div><em>Return type: </em><code><a>void</a></code></div></dd></dl></div>

    </div>

    <div class="section" id="mediaarray"><h3 id="x3.5-mediaarray-typedef"><span class="secno">3.5 </span><a>MediaArray</a> typedef</h3>

    <p>The <a>MediaArray</a> typedef represents a <code>sequence</code> of
    <a href="#mediafile"> <code>MediaFile</code></a>
    objects. </p>

    <pre class="idl"><span class="idlTypedef" id="idl-def-MediaArray">typedef <span class="idlTypedefType">sequence&lt;<a class="idlType" href="#idl-def-MediaFile"><code>MediaFile</code></a>&gt;</span> <span class="idlTypedefID">MediaArray</span>;</span></pre><div class="idlTypedefDesc">Throughout this specification, the identifier <span class="idlTypedefID">MediaArray</span> is used to refer to the <span class="idlTypedefType">sequence&lt;<a class="idlType" href="#idl-def-MediaFile"><code>MediaFile</code></a>&gt;</span> type.</div>

    </div>

    <div class="section" id="errorcallback"><h3 id="x3.6-captureerrorcb-interface"><span class="secno">3.6 </span><a class="idlType" href="#idl-def-CaptureErrorCB"><code>CaptureErrorCB</code></a> interface</h3>
    <pre class="idl"><span class="idlInterface" id="idl-def-CaptureErrorCB">[<span class="extAttr">Callback=FunctionOnly, NoInterfaceObject</span>]
interface <span class="idlInterfaceID">CaptureErrorCB</span> {
<span class="idlMethod">    <span class="idlMethType"><a>void</a></span> <span class="idlMethName"><a href="#widl-CaptureErrorCB-onError">onError</a></span> (<span class="idlParam">in <span class="idlParamType"><a class="idlType" href="#idl-def-CaptureError"><code>CaptureError</code></a></span> <span class="idlParamName">error</span></span>);</span>
};</span>
</pre><div class="section" id="methods-2"><h4 id="x3.6.1-methods"><span class="secno">3.6.1 </span>Methods</h4><dl class="methods"><dt id="widl-CaptureErrorCB-onError"><code>onError</code></dt><dd>
      
    <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">error</td><td class="prmType"><code><a class="idlType" href="#idl-def-CaptureError"><code>CaptureError</code></a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">The error
      object of an unsuccessful capture asynchronous operation. </td></tr></table><div><em>No exceptions.</em></div><div><em>Return type: </em><code><a>void</a></code></div></dd></dl></div>
    
    </div>

    <div class="section" id="viewfindercallback"><h3 id="x3.7-viewfindercb-interface"><span class="secno">3.7 </span><a class="idlType" href="#idl-def-ViewFinderCB"><code>ViewFinderCB</code></a> interface</h3>
    <pre class="idl"><span class="idlInterface" id="idl-def-ViewFinderCB">[<span class="extAttr">Callback=FunctionOnly, NoInterfaceObject</span>]
interface <span class="idlInterfaceID">ViewFinderCB</span> {
<span class="idlMethod">    <span class="idlMethType"><a>void</a></span> <span class="idlMethName"><a href="#widl-ViewFinderCB-onSuccess">onSuccess</a></span> (<span class="idlParam">in <span class="idlParamType"><a class="idlType" href="#idl-def-ViewFinder"><code>ViewFinder</code></a></span> <span class="idlParamName">viewfinder</span></span>);</span>
};</span>
</pre><div class="section" id="methods-3"><h4 id="x3.7.1-methods"><span class="secno">3.7.1 </span>Methods</h4><dl class="methods"><dt id="widl-ViewFinderCB-onSuccess"><code>onSuccess</code></dt><dd>
      
    <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">viewfinder</td><td class="prmType"><code><a class="idlType" href="#idl-def-ViewFinder"><code>ViewFinder</code></a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">The
      ViewFinder object of the selected capture device.</td></tr></table><div><em>No exceptions.</em></div><div><em>Return type: </em><code><a>void</a></code></div></dd></dl></div>
    
    </div>

    <div class="section" id="viewfindererrorcallback"><h3 id="x3.8-viewfindererrorcb-interface"><span class="secno">3.8 </span><a class="idlType" href="#idl-def-ViewFinderErrorCB"><code>ViewFinderErrorCB</code></a> interface</h3>
    <pre class="idl"><span class="idlInterface" id="idl-def-ViewFinderErrorCB">[<span class="extAttr">Callback=FunctionOnly, NoInterfaceObject</span>]
interface <span class="idlInterfaceID">ViewFinderErrorCB</span> {
<span class="idlMethod">    <span class="idlMethType"><a>void</a></span> <span class="idlMethName"><a href="#widl-ViewFinderErrorCB-onError">onError</a></span> (<span class="idlParam">in <span class="idlParamType"><a class="idlType" href="#idl-def-CaptureError"><code>CaptureError</code></a></span> <span class="idlParamName">error</span></span>);</span>
};</span>
</pre><div class="section" id="methods-4"><h4 id="x3.8.1-methods"><span class="secno">3.8.1 </span>Methods</h4><dl class="methods"><dt id="widl-ViewFinderErrorCB-onError"><code>onError</code></dt><dd>
      
      <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">error</td><td class="prmType"><code><a class="idlType" href="#idl-def-CaptureError"><code>CaptureError</code></a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc"> The error
      object of an unsuccessful asynchronous viewfinder acquisition operation. </td></tr></table><div><em>No exceptions.</em></div><div><em>Return type: </em><code><a>void</a></code></div></dd></dl></div>
    </div>

    <div class="section" id="captureerror"><h3 id="x3.9-captureerror-interface"><span class="secno">3.9 </span><a class="idlType" href="#idl-def-CaptureError"><code>CaptureError</code></a> interface</h3>

    <p>The <a class="idlType" href="#idl-def-CaptureError"><code>CaptureError</code></a> interface encapsulates all errors in the
    Capture <acronym title="Application Programming Interface">API</acronym>. </p>

    <p class="note">More error codes to be defined here. </p>

    <pre class="idl"><span class="idlInterface" id="idl-def-CaptureError">[<span class="extAttr">NoInterfaceObject</span>]
interface <span class="idlInterfaceID">CaptureError</span> {
<span class="idlConst">    const <span class="idlConstType"><a>unsigned short</a></span> <span class="idlConstName"><a href="#widl-CaptureError-CAPTURE_INTERNAL_ERR">CAPTURE_INTERNAL_ERR</a></span> = <span class="idlConstValue">0</span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>unsigned short</a></span> <span class="idlAttrName"><a href="#widl-CaptureError-code">code</a></span>;</span>
};</span>
</pre><div class="section" id="attributes-3"><h4 id="x3.9.1-attributes"><span class="secno">3.9.1 </span>Attributes</h4><dl class="attributes"><dt id="widl-CaptureError-code"><code>code</code> of type <span class="idlAttrType"><a>unsigned short</a></span>, readonly</dt><dd>An error code assigned by an implementation when an error has
      occurred in Capture <acronym title="Application Programming Interface">API</acronym> processing.<div><em>No exceptions.</em></div></dd></dl></div><div class="section" id="constants"><h4 id="x3.9.2-constants"><span class="secno">3.9.2 </span>Constants</h4><dl class="constants"><dt id="widl-CaptureError-CAPTURE_INTERNAL_ERR"><code>CAPTURE_INTERNAL_ERR</code> of type <span class="idlConstType"><a>unsigned short</a></span></dt><dd>Camera or microphone failed to capture image or sound. </dd></dl></div>
  
    </div>

    <div class="section" id="captureimageoptions"><h3 id="x3.10-captureimageoptions-interface"><span class="secno">3.10 </span><a class="idlType" href="#idl-def-CaptureImageOptions"><code>CaptureImageOptions</code></a> interface</h3>

    <p>The <a class="idlType" href="#idl-def-CaptureImageOptions"><code>CaptureImageOptions</code></a> interface encapsulates all image
    capture operation configuration options.</p>

    <p class="note">Additional attributes proposed: <code>width</code>
    and <code>height</code>.</p>

    <pre class="idl"><span class="idlInterface" id="idl-def-CaptureImageOptions">[<span class="extAttr">NoInterfaceObject</span>]
interface <span class="idlInterfaceID">CaptureImageOptions</span> {
<span class="idlAttribute">    attribute <span class="idlAttrType"><a>unsigned long</a></span> <span class="idlAttrName"><a href="#widl-CaptureImageOptions-maxNumberOfMediaFiles">maxNumberOfMediaFiles</a></span>;</span>
};</span>
</pre><div class="section" id="attributes-4"><h4 id="x3.10.1-attributes"><span class="secno">3.10.1 </span>Attributes</h4><dl class="attributes"><dt id="widl-CaptureImageOptions-maxNumberOfMediaFiles"><code>maxNumberOfMediaFiles</code> of type <span class="idlAttrType"><a>unsigned long</a></span></dt><dd>Upper limit of images user can take.<div><em>No exceptions.</em></div></dd></dl></div>

    </div>

    <div class="section" id="capturevideooptions"><h3 id="x3.11-capturevideooptions-interface"><span class="secno">3.11 </span><a class="idlType" href="#idl-def-CaptureVideoOptions"><code>CaptureVideoOptions</code></a> interface</h3>

    <pre class="idl"><span class="idlInterface" id="idl-def-CaptureVideoOptions">[<span class="extAttr">NoInterfaceObject</span>]
interface <span class="idlInterfaceID">CaptureVideoOptions</span> {
<span class="idlAttribute">    attribute <span class="idlAttrType"><a>unsigned long</a></span> <span class="idlAttrName"><a href="#widl-CaptureVideoOptions-maxNumberOfMediaFiles">maxNumberOfMediaFiles</a></span>;</span>
<span class="idlAttribute">    attribute <span class="idlAttrType"><a>double</a></span>        <span class="idlAttrName"><a href="#widl-CaptureVideoOptions-duration">duration</a></span>;</span>
};</span>
</pre><div class="section" id="attributes-5"><h4 id="x3.11.1-attributes"><span class="secno">3.11.1 </span>Attributes</h4><dl class="attributes"><dt id="widl-CaptureVideoOptions-duration"><code>duration</code> of type <span class="idlAttrType"><a>double</a></span></dt><dd>Maximum duration of a single video clip in milliseconds.<div><em>No exceptions.</em></div></dd><dt id="widl-CaptureVideoOptions-maxNumberOfMediaFiles"><code>maxNumberOfMediaFiles</code> of type <span class="idlAttrType"><a>unsigned long</a></span></dt><dd>Upper limit of videos user can record.<div><em>No exceptions.</em></div></dd></dl></div>

    </div>

    <div class="section" id="captureaudiooptions"><h3 id="x3.12-captureaudiooptions-interface"><span class="secno">3.12 </span><a class="idlType" href="#idl-def-CaptureAudioOptions"><code>CaptureAudioOptions</code></a> interface</h3>
    <p class="note">Additional attributes proposed: <code>duration</code>.</p>

    <pre class="idl"><span class="idlInterface" id="idl-def-CaptureAudioOptions">[<span class="extAttr">NoInterfaceObject</span>]
interface <span class="idlInterfaceID">CaptureAudioOptions</span> {
<span class="idlAttribute">    attribute <span class="idlAttrType"><a>unsigned long</a></span> <span class="idlAttrName"><a href="#widl-CaptureAudioOptions-maxNumberOfMediaFiles">maxNumberOfMediaFiles</a></span>;</span>
};</span>
</pre><div class="section" id="attributes-6"><h4 id="x3.12.1-attributes"><span class="secno">3.12.1 </span>Attributes</h4><dl class="attributes"><dt id="widl-CaptureAudioOptions-maxNumberOfMediaFiles"><code>maxNumberOfMediaFiles</code> of type <span class="idlAttrType"><a>unsigned long</a></span></dt><dd>Upper limit of sound clips user can record.<div><em>No exceptions.</em></div></dd></dl></div>

    </div>

  <div class="section" id="pendingoperation"><h3 id="x3.13-pendingoperation-interface"><span class="secno">3.13 </span><a class="idlType" href="#idl-def-PendingOperation"><code>PendingOperation</code></a> interface</h3>

  <p class="note">This may be a general interface for use throughout
  all APIs. Included here for now for completion.</p>

  <pre class="idl"><span class="idlInterface" id="idl-def-PendingOperation">[<span class="extAttr">NoInterfaceObject</span>]
interface <span class="idlInterfaceID">PendingOperation</span> {
<span class="idlMethod">    <span class="idlMethType"><a>void</a></span> <span class="idlMethName"><a href="#widl-PendingOperation-cancel">cancel</a></span> ();</span>
};</span>
</pre><div class="section" id="methods-5"><h4 id="x3.13.1-methods"><span class="secno">3.13.1 </span>Methods</h4><dl class="methods"><dt id="widl-PendingOperation-cancel"><code>cancel</code></dt><dd>Cancel/clear the pending asynchronous operation. <div><em>No parameters.</em></div><div><em>No exceptions.</em></div><div><em>Return type: </em><code><a>void</a></code></div></dd></dl></div>

  </div>

  <div class="section" id="viewfinder-interface">
  <h3 id="x3.14-viewfinder-interface"><span class="secno">3.14 </span><a class="idlType" href="#idl-def-ViewFinder"><code>ViewFinder</code></a> interface</h3>

  <p>This interface represents a camera viewfinder. It inherits from
  <code>File</code> [<a href="#bib-FILE-API" rel="biblioentry" class="bibref">FILE-API</a>] and provides a method to embed a
  viewfinder to web content.</p>

  <pre class="idl"><span class="idlInterface" id="idl-def-ViewFinder">[<span class="extAttr">NoInterfaceObject</span>]
interface <span class="idlInterfaceID">ViewFinder</span> : <span class="idlSuperclass"><a>File</a></span> {
<span class="idlMethod">    <span class="idlMethType"><a>void</a></span> <span class="idlMethName"><a href="#widl-ViewFinder-startCapture">startCapture</a></span> (<span class="idlParam">in <span class="idlParamType"><a>Blob</a></span> <span class="idlParamName">data</span></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a>void</a></span> <span class="idlMethName"><a href="#widl-ViewFinder-stopCapture">stopCapture</a></span> ();</span>
};</span>
</pre><div class="section" id="methods-6"><h4 id="x3.14.1-methods"><span class="secno">3.14.1 </span>Methods</h4><dl class="methods"><dt id="widl-ViewFinder-startCapture"><code>startCapture</code></dt><dd>
    <p>
      Starts the capture process.
    </p>
    
  <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">data</td><td class="prmType"><code><a>Blob</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">
        The blob to write.
      </td></tr></table><div><em>No exceptions.</em></div><div><em>Return type: </em><code><a>void</a></code></div></dd><dt id="widl-ViewFinder-stopCapture"><code>stopCapture</code></dt><dd>
    <p>
      Stops the capture process.
    </p>
  <div><em>No parameters.</em></div><div><em>No exceptions.</em></div><div><em>Return type: </em><code><a>void</a></code></div></dd></dl></div>

  </div>
  </div>

  <div class="section" id="formaccess">

  <!--OddPage--><h2 id="x4.-capture-input-selection"><span class="secno">4. </span>Capture Input Selection</h2>

  <p>In addition to programmable <acronym title="Application Programming Interface">API</acronym>, content can be acquired from
  capture devices through a file-select control.</p>

    <div class="section" id="capture">
    <h3 id="x4.1-capture-aware-file-select-control"><span class="secno">4.1 </span>Capture aware file-select control</h3>

    <p>This section is non-normative.</p>

    <p>If input element in the File Upload state [<a href="#bib-HTML5" rel="biblioentry" class="bibref">HTML5</a>] contains
    accept attribute with values <code>image/*</code>,
    <code>sound/*</code>, or <code>video/*</code>, the user agent can
    invoke a file picker that allows respectively the user to take a
    picture, record a sound file, or record a video in addition to
    selecting an existing file from the file system.</p>

    <p>See the <a href="#uiexamples">User Interface Examples</a> appendix for the illustration.

    </p><p>In case the user chooses to capture video, audio, or image
    content, the user agent creates media files on the fly as
    specified in [<a href="#bib-HTML5" rel="biblioentry" class="bibref">HTML5</a>].</p>

    <pre class="example sh_javascript_dom sh_sourceCode"><span class="sh_symbol">&lt;</span>input id<span class="sh_symbol">=</span><span class="sh_string">"cameraInput"</span> type<span class="sh_symbol">=</span><span class="sh_string">"file"</span> accept<span class="sh_symbol">=</span><span class="sh_string">"image/*"</span><span class="sh_symbol">&gt;</span> </pre>

    <p>In trusted environments the click event of file input element
    can be synthesised as follows:</p>

    <pre class="example sh_javascript_dom sh_sourceCode"><span class="sh_symbol">&lt;</span>input id<span class="sh_symbol">=</span><span class="sh_string">"cameraInput"</span> <span class="sh_predef_func">onchange</span><span class="sh_symbol">=</span><span class="sh_string">"successCB();"</span> type<span class="sh_symbol">=</span><span class="sh_string">"file"</span> accept<span class="sh_symbol">=</span><span class="sh_string">"image/*"</span><span class="sh_symbol">&gt;</span> 

<span class="sh_symbol">&lt;</span>script<span class="sh_symbol">&gt;</span>

<span class="sh_keyword">function</span> <span class="sh_function">successCB</span><span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
  <span class="sh_comment">// Read the image using file-reader or submit the form</span>
<span class="sh_cbracket">}</span>

<span class="sh_predef_var">document</span><span class="sh_symbol">.</span><span class="sh_function">getElementById</span><span class="sh_symbol">(</span><span class="sh_string">'cameraInput'</span><span class="sh_symbol">).</span><span class="sh_function">click</span><span class="sh_symbol">();</span>

<span class="sh_symbol">&lt;/</span>script<span class="sh_symbol">&gt;</span></pre>

</div>
<div class="section" id="viewfinder">
<h3 id="x4.2-viewfinder-aware-file-select-control"><span class="secno">4.2 </span>ViewFinder aware file-select control</h3>

<p>Conforming user agents <em title="must" class="rfc2119">must</em> provide the user a file picker from
which it is possible to select any of the available capture devices in
addition to possibility to select one or more files from the file
system.</p>

<p>If a user selects camera device, the <code>FileList</code> object
that represents the currently selected files in the input element in
the File Upload state <em title="must" class="rfc2119">must</em> contain one <code>ViewFinder</code>
object instead of <code>File</code> objects as in [<a href="#bib-FILE-API" rel="biblioentry" class="bibref">FILE-API</a>].</p>

<pre class="example example sh_javascript_dom sh_sourceCode"><span class="sh_symbol">&lt;</span>script<span class="sh_symbol">&gt;</span>

  <span class="sh_keyword">function</span> <span class="sh_function">getVideo</span> <span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
    <span class="sh_keyword">var</span> inp <span class="sh_symbol">=</span> <span class="sh_predef_var">document</span><span class="sh_symbol">.</span><span class="sh_function">createElement</span><span class="sh_symbol">(</span><span class="sh_string">"input"</span><span class="sh_symbol">);</span>
    inp<span class="sh_symbol">.</span>type <span class="sh_symbol">=</span> <span class="sh_string">"file"</span><span class="sh_symbol">;</span>
    inp<span class="sh_symbol">.</span>accept <span class="sh_symbol">=</span> <span class="sh_string">"video/*"</span><span class="sh_symbol">;</span>
    inp<span class="sh_symbol">.</span><span class="sh_predef_func">onchange</span> <span class="sh_symbol">=</span> <span class="sh_keyword">function</span> <span class="sh_symbol">()</span> <span class="sh_cbracket">{</span> <span class="sh_function">setupVideo</span><span class="sh_symbol">(</span><span class="sh_keyword">this</span><span class="sh_symbol">.</span>files<span class="sh_symbol">[</span><span class="sh_number">0</span><span class="sh_symbol">]);</span> <span class="sh_cbracket">}</span><span class="sh_symbol">;</span>
    <span class="sh_comment">// this is only possible in trusted environments</span>
    <span class="sh_comment">// the click event cannot be synthetized by default</span>
    inp<span class="sh_symbol">.</span><span class="sh_function">click</span><span class="sh_symbol">();</span>
  <span class="sh_cbracket">}</span>

  <span class="sh_keyword">var</span> blob<span class="sh_symbol">;</span>

  <span class="sh_keyword">function</span> <span class="sh_function">setupVideo</span> <span class="sh_symbol">(</span>vf<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
    <span class="sh_predef_var">document</span><span class="sh_symbol">.</span><span class="sh_function">getElementById</span><span class="sh_symbol">(</span><span class="sh_string">"my-video"</span><span class="sh_symbol">).</span>src <span class="sh_symbol">=</span> vf<span class="sh_symbol">.</span>URL<span class="sh_symbol">;</span>
	<span class="sh_keyword">var</span> bb <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">BlobBuilder</span><span class="sh_symbol">();</span>
    blob <span class="sh_symbol">=</span> bb<span class="sh_symbol">.</span><span class="sh_function">getBlob</span><span class="sh_symbol">();</span>
    <span class="sh_predef_var">document</span><span class="sh_symbol">.</span><span class="sh_function">getElementById</span><span class="sh_symbol">(</span><span class="sh_string">"start"</span><span class="sh_symbol">).</span><span class="sh_predef_func">onclick</span> <span class="sh_symbol">=</span> <span class="sh_keyword">function</span> <span class="sh_symbol">()</span> <span class="sh_cbracket">{</span> vf<span class="sh_symbol">.</span><span class="sh_function">startCapture</span><span class="sh_symbol">(</span>bb<span class="sh_symbol">.</span><span class="sh_function">getBlob</span><span class="sh_symbol">());</span> <span class="sh_cbracket">}</span>
    <span class="sh_predef_var">document</span><span class="sh_symbol">.</span><span class="sh_function">getElementById</span><span class="sh_symbol">(</span><span class="sh_string">"stop"</span><span class="sh_symbol">).</span><span class="sh_predef_func">onclick</span> <span class="sh_symbol">=</span> <span class="sh_keyword">function</span> <span class="sh_symbol">()</span> <span class="sh_cbracket">{</span> vf<span class="sh_symbol">.</span><span class="sh_function">stopCapture</span><span class="sh_symbol">();</span> <span class="sh_cbracket">}</span>
    <span class="sh_predef_var">document</span><span class="sh_symbol">.</span><span class="sh_function">getElementById</span><span class="sh_symbol">(</span><span class="sh_string">"send"</span><span class="sh_symbol">).</span><span class="sh_predef_func">onclick</span> <span class="sh_symbol">=</span> <span class="sh_keyword">function</span> <span class="sh_symbol">()</span> <span class="sh_cbracket">{</span> <span class="sh_function">send</span><span class="sh_symbol">();</span> <span class="sh_cbracket">}</span>
  <span class="sh_cbracket">}</span>

  <span class="sh_keyword">function</span> <span class="sh_function">send</span> <span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
    <span class="sh_keyword">if</span> <span class="sh_symbol">(!</span>blob<span class="sh_symbol">)</span> <span class="sh_cbracket">{</span>
       <span class="sh_predef_func">alert</span><span class="sh_symbol">(</span><span class="sh_string">"You didn't capture anything!"</span><span class="sh_symbol">)</span>
       <span class="sh_keyword">return</span><span class="sh_symbol">;</span>
    <span class="sh_cbracket">}</span>
    <span class="sh_keyword">var</span> xhr <span class="sh_symbol">=</span> <span class="sh_keyword">new</span> <span class="sh_function">XMLHttpRequest</span><span class="sh_symbol">();</span>
    xhr<span class="sh_symbol">.</span><span class="sh_predef_func">open</span><span class="sh_symbol">(</span><span class="sh_string">"GET"</span><span class="sh_symbol">,</span> <span class="sh_string">"http://my-server/video-upload"</span><span class="sh_symbol">);</span>
    xhr<span class="sh_symbol">.</span>onreadystatechange <span class="sh_symbol">=</span> <span class="sh_keyword">function</span> <span class="sh_symbol">()</span> <span class="sh_cbracket">{</span>
      <span class="sh_keyword">if</span> <span class="sh_symbol">(</span>xhr<span class="sh_symbol">.</span>readyState <span class="sh_symbol">==</span> <span class="sh_number">4</span> <span class="sh_symbol">&amp;&amp;</span> xhr<span class="sh_symbol">.</span><span class="sh_predef_var">status</span> <span class="sh_symbol">==</span> <span class="sh_number">200</span><span class="sh_symbol">)</span> <span class="sh_predef_func">alert</span><span class="sh_symbol">(</span><span class="sh_string">"Video uploaded!"</span><span class="sh_symbol">);</span>
    <span class="sh_cbracket">}</span>
    xhr<span class="sh_symbol">.</span><span class="sh_function">send</span><span class="sh_symbol">(</span>blob<span class="sh_symbol">);</span>
  <span class="sh_cbracket">}</span>
<span class="sh_symbol">&lt;/</span>script<span class="sh_symbol">&gt;</span>

<span class="sh_symbol">&lt;</span>button <span class="sh_predef_func">onclick</span><span class="sh_symbol">=</span><span class="sh_string">'getVideo();'</span><span class="sh_symbol">&gt;</span>Film your face<span class="sh_symbol">!&lt;/</span>button<span class="sh_symbol">&gt;</span>
<span class="sh_symbol">&lt;</span>video id<span class="sh_symbol">=</span><span class="sh_string">'my-video'</span><span class="sh_symbol">&gt;&lt;/</span>video<span class="sh_symbol">&gt;</span>
<span class="sh_symbol">&lt;</span>button id<span class="sh_symbol">=</span><span class="sh_string">'start'</span><span class="sh_symbol">&gt;</span>Start<span class="sh_symbol">&lt;/</span>button<span class="sh_symbol">&gt;</span>
<span class="sh_symbol">&lt;</span>button id<span class="sh_symbol">=</span><span class="sh_string">'stop'</span><span class="sh_symbol">&gt;</span>Stop<span class="sh_symbol">&lt;/</span>button<span class="sh_symbol">&gt;</span>
<span class="sh_symbol">&lt;</span>button id<span class="sh_symbol">=</span><span class="sh_string">'send'</span><span class="sh_symbol">&gt;</span>Upload<span class="sh_symbol">&lt;/</span>button<span class="sh_symbol">&gt;</span></pre>

</div>

</div>

<div class="appendix section" id="related">
<!--OddPage--><h2 id="a.-related-documents"><span class="secno">A. </span>Related documents</h2>
<p>The <acronym title="Application Programming Interface">API</acronym> described in this document took inspiration from the following documents:</p>
<ul>
<li><a href="http://code.google.com/p/gears/wiki/CameraAPI">Google Camera <acronym title="Application Programming Interface">API</acronym></a>
</li><li><a href="http://bondi.omtp.org/1.0/apis/camera.html">BONDI 1.1 camera <acronym title="Application Programming Interface">API</acronym></a>
</li><li><a href="http://lists.w3.org/Archives/Public/public-device-apis/2009Apr/att-0001/camera.html">Nokia Camara <acronym title="Application Programming Interface">API</acronym></a>
</li></ul>
</div>

<div class="appendix section" id="uiexamples">
<!--OddPage--><h2 id="b.-user-interface-examples"><span class="secno">B. </span>User Interface Examples</h2>

<p>Capture <acronym title="Application Programming Interface">API</acronym> aware file picker might render as:

</p><p><img alt="A File picker with camera support" src="capture-api-file-picker-concept.png"></p> 
</div>

<div class="appendix section" id="future">
<!--OddPage--><h2 id="c.-features-for-future-consideration"><span class="secno">C. </span>Features for Future Consideration</h2>

<p>This is a list of features that have been discussed with respect to
this version of the <acronym title="Application Programming Interface">API</acronym> but for which it has been decided that if they
are included it will be in a future revision.

</p>
<ul>
<li>... </li></ul>
</div>
<div class="appendix section" id="ack">
<!--OddPage--><h2 id="d.-acknowledgements"><span class="secno">D. </span>Acknowledgements</h2>

<p>Many thanks to Google, Nokia, and OMTP BONDI who provided the
initial input into this specification.

</p>
</div>
<div class="appendix section" id="references"><!--OddPage--><h2 id="e.-references"><span class="secno">E. </span>References</h2><div class="section" id="normative-references"><h3 id="e.1-normative-references"><span class="secno">E.1 </span>Normative references</h3><p>No normative references.</p></div><div class="section" id="informative-references"><h3 id="e.2-informative-references"><span class="secno">E.2 </span>Informative references</h3><dl class="bibliography"><dt id="bib-FILE-API">[FILE-API]</dt><dd>Arun Ranganathan. <a href="http://www.w3.org/TR/2009/WD-FileAPI-20091117/"><cite>File API.</cite></a> 17 November 2009. W3C Working Draft. (Work in progress.) URL: <a href="http://www.w3.org/TR/2009/WD-FileAPI-20091117/">http://www.w3.org/TR/2009/WD-FileAPI-20091117/</a> 
</dd><dt id="bib-HTML5">[HTML5]</dt><dd>Ian Hickson; David Hyatt. <a href="http://www.w3.org/TR/2009/WD-html5-20090825/"><cite>HTML 5.</cite></a> 25 August 2009. W3C Working Draft. (Work in progress.) URL: <a href="http://www.w3.org/TR/2009/WD-html5-20090825/">http://www.w3.org/TR/2009/WD-html5-20090825/</a> 
</dd><dt id="bib-NAVIGATOR">[NAVIGATOR]</dt><dd>Ian Hickson, David Hyatt. <a href="http://dev.w3.org/html5/spec/webappapis.html#navigator"><cite>Navigator interface in HTML5</cite></a>, Editors draft (Work in progress). URL: <a href="http://dev.w3.org/html5/spec/webappapis.html#navigator">http://dev.w3.org/html5/spec/webappapis.html#navigator</a> 
</dd></dl></div></div></body></html>